function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var o,n=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"4p3S":function(e,t,o){"use strict";o.d(t,"a",(function(){return b}));var n=o("XNiG"),i=o("1G5W"),r=o("RwQR"),a=o("Y2tp"),s=o("8Y7J"),l=o("7AsP"),c=o("G0yt"),d=o("TSSN"),u=["table"],b=function(){var e=function(){function e(t,o,i,a){_classCallCheck(this,e),this.dataService=t,this.activeModal=o,this.modalService=i,this.translateService=a,this.items=[],this.loading=!1,this.selectedIds=[],this.collectionSize=0,this.queryOptions=new r.a("name","asc",1,10,0,0),this.destroyed$=new n.a}return _createClass(e,[{key:"ngOnInit",value:function(){this.getList(),this.afterInit()}},{key:"afterInit",value:function(){}},{key:"onSearchClear",value:function(){this.getList()}},{key:"onModalClose",value:function(e){}},{key:"onSearchWordUpdate",value:function(e){var t=this;if(void 0!==e)return this.queryOptions.search_word=e,this.queryOptions.page=1,void(this.queryOptions.search_word?this.getList():this.onSearchClear());clearTimeout(this.searchTimer),this.searchTimer=setTimeout((function(){t.queryOptions.page=1,t.getList()}),700)}},{key:"getModalElementId",value:function(e){return["modal",e||0].join("-")}},{key:"setModalInputs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=void 0!==e&&!t;this.modalRef.componentInstance.modalTitle=this.getLangString(n?"EDITING":"ADD"),this.modalRef.componentInstance.modalId=o,this.modalRef.componentInstance.itemId=e||0,this.modalRef.componentInstance.isItemCopy=t||!1,this.modalRef.componentInstance.isEditMode=n}},{key:"modalOpen",value:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getModalElementId(e);if(window.document.body.classList.add("modal-open"),window.document.getElementById(n)){var i=window.document.getElementById(n),r=i.previousElementSibling;return i.classList.add("d-block"),i.classList.remove("modal-minimized"),void r.classList.remove("d-none")}this.modalRef=this.modalService.open(this.getModalContent(),{size:"lg",backdrop:"static",keyboard:!1,backdropClass:"modal-backdrop-left45",windowClass:"modal-left45",container:"#modals-container"}),this.setModalInputs(e,o,n),this.modalRef.result.then((function(e){t.destroyed$.isStopped||(t.onModalClose(e),t.getList())}),(function(e){t.destroyed$.isStopped||(t.onModalClose(e),e&&["submit","updated"].indexOf(e)>-1&&t.getList())}))}},{key:"deleteItemConfirm",value:function(e){var t=this;this.modalRef=this.modalService.open(a.b),this.modalRef.componentInstance.modalTitle=this.getLangString("CONFIRM"),this.modalRef.componentInstance.modalContent=this.getLangString("YOU_SURE_YOU_WANT_DELETE"),this.modalRef.result.then((function(o){"accept"===o&&t.deleteItem(e)}))}},{key:"getLangString",value:function(e){return this.translateService.store.translations[this.translateService.currentLang]&&this.translateService.store.translations[this.translateService.currentLang][e]||e}},{key:"confirmAction",value:function(e){return this.modalRef=this.modalService.open(a.b),this.modalRef.componentInstance.modalTitle=this.getLangString("CONFIRM"),this.modalRef.componentInstance.modalContent=e,this.modalRef.result}},{key:"blockSelected",value:function(){var e=this;0!==this.selectedIds.length?this.dataService.actionBatch(this.selectedIds,"block").subscribe((function(t){e.clearSelected(),e.getList()}),(function(t){return e.showAlert(t.error||e.getLangString("ERROR"))})):this.showAlert(this.getLangString("NOTHING_IS_SELECTED"))}},{key:"deleteSelected",value:function(){var e=this;0!==this.selectedIds.length?this.confirmAction(this.getLangString("YOU_SURE_YOU_WANT_DELETE_SELECTED")).then((function(t){"accept"===t&&e.dataService.actionBatch(e.selectedIds,"delete").subscribe((function(t){e.clearSelected(),e.getList()}),(function(t){return e.showAlert(t.error||e.getLangString("ERROR"))}))})):this.showAlert(this.getLangString("NOTHING_IS_SELECTED"))}},{key:"showAlert",value:function(e){this.modalRef=this.modalService.open(a.a),this.modalRef.componentInstance.modalContent=e,this.modalRef.componentInstance.modalTitle=this.getLangString("ERROR"),this.modalRef.componentInstance.messageType="error"}},{key:"deleteItem",value:function(e){var t=this;this.confirmAction(this.getLangString("YOU_SURE_YOU_WANT_DELETE")).then((function(o){"accept"===o&&t.dataService.deleteItem(e).subscribe((function(e){t.getList()}),(function(e){e.error&&t.showAlert(e.error)}))}))}},{key:"clearSelected",value:function(){this.table&&this.table.clearSelected()}},{key:"actionRequest",value:function(e){switch(e[0]){case"edit":this.modalOpen(e[1]);break;case"copy":this.modalOpen(e[1],!0);break;case"delete":this.deleteItem(e[1]);break;case"changeQuery":this.getList()}}},{key:"getList",value:function(){var e=this;this.loading=!0,this.dataService.getListPage(this.queryOptions).pipe(Object(i.a)(this.destroyed$)).subscribe({next:function(t){e.items=t.items,e.collectionSize=t.total,e.loading=!1},error:function(t){e.items=[],e.collectionSize=0,t.error&&e.showAlert(t.error),e.loading=!1}})}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}}]),e}();return e.title="",e.\u0275fac=function(t){return new(t||e)(s.Qb(l.a),s.Qb(c.b),s.Qb(c.h),s.Qb(d.d))},e.\u0275dir=s.Lb({type:e,viewQuery:function(e,t){var o;1&e&&s.Jc(u,!0),2&e&&s.Cc(o=s.jc())&&(t.table=o.first)}}),e}()},ot8b:function(e,t,o){"use strict";o.d(t,"a",(function(){return u}));var n=o("s7LF"),i=o("XNiG"),r=o("1G5W"),a=o("7AsP"),s=o("8Y7J"),l=o("G0yt"),c=o("TSSN"),d=["formEl"],u=function(){var e=function(){function e(t,o,n,r,a){_classCallCheck(this,e),this.fb=t,this.activeModal=o,this.translateService=n,this.dataService=r,this.elRef=a,this.modalId="",this._formFieldsErrors={},this.submitted=!1,this.loading=!1,this.dataLoaded=!1,this.closeReason="canceled",this.files={},this.formFields=[],this.arrayFields={},this.isSaveButtonDisabled=!1,this.localeDefault="",this.localeCurrent="",this.localeFieldsAllowed=[],this.localePreviousValues={},this.uniqueId="",this.destroyed$=new i.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.uniqueId=this.createUniqueId(),this.elRef&&this.getRootElement().setAttribute("id",this.modalId),this.onBeforeInit(),this.buildForm(),this.isEditMode||this.isItemCopy?this.getModelData().then((function(){e.onAfterGetData()})):this.onAfterGetData(),this.onAfterInit()}},{key:"onBeforeInit",value:function(){}},{key:"onAfterInit",value:function(){}},{key:"onAfterGetData",value:function(){this.dataLoaded=!0,this.buildControls(this.form,this.formFields)}},{key:"getSystemFieldName",value:function(){return""}},{key:"getLangString",value:function(e){return this.translateService.store.translations[this.translateService.currentLang][e]||e}},{key:"getModelData",value:function(){var e=this;return this.loading=!0,new Promise((function(t,o){e.dataService.getItem(e.itemId).pipe(Object(r.a)(e.destroyed$)).subscribe({next:function(o){if(e.isItemCopy){o.id=null;var n=e.getSystemFieldName();n&&(o[n]="")}Object.assign(e.model,o),e.loading=!1,t(o)},error:function(t){e.errorMessage=t.error||e.getLangString("ERROR"),e.loading=!1,o(t)}})}))}},{key:"buildForm",value:function(){var e=this;this.form=this.fb.group(this.buildControls(null,this.formFields)),this.form.valueChanges.pipe(Object(r.a)(this.destroyed$)).subscribe((function(){return e.onValueChanged()}))}},{key:"buildControls",value:function(e,t){var o=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"model",i={};return void 0===e&&(e=this.form||null),t.forEach((function(t){var r=o.getControl(e,t),a=null;if(n&&o[n]?(o[n].options||(o[n].options={}),a=0===t.name.indexOf("options_")?o[n].options[t.name.substr(8)]||null:o[n][t.name]||null):a=null,r)if(t.disabled&&r.disable(),t.children){var s=a,l=r;l.clear(),s.forEach((function(e,n){var i=o.getFormFieldByName(t.name),r=o.buildControls(null,i.children,null);l.push(o.fb.group(r))})),l.patchValue(s)}else r.setValue(a);else t.children?(i[t.name]=o.fb.array([]),o.createArrayFieldsProperty(t.name)):i[t.name]=o.fb.control({value:a,disabled:t.disabled||!1},t.validators)})),i}},{key:"onValueChanged",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"form";this[t]&&(this[t].valid&&(this.errorMessage=""),Object.keys(this[t].value).forEach((function(t){e.formErrors[t]="";var o=e.getControl(e.form,null,t);if(o&&!o.valid&&o.errors){var n="";Object.keys(o.errors).forEach((function(t){n+=(n?" ":"")+e.getLangString("INVALID_"+t.toUpperCase())})),e.formErrors[t]=n}})))}},{key:"getFormFieldByName",value:function(e){var t=this.formFields.filter((function(t){return t.name===e}));return t.length>0?t[0]:null}},{key:"createArrayFieldsProperty",value:function(e){var t=this;Object.defineProperty(this.arrayFields,e,{get:function(){return t.form?t.form.get(e):null}})}},{key:"getControl",value:function(e,t,o){return e?e.get(o||t.name):null}},{key:"focusFormError",value:function(){var e=this;setTimeout((function(){e.formEl.nativeElement.querySelector(".form-control.is-invalid")&&e.formEl.nativeElement.querySelector(".form-control.is-invalid").focus()}),1)}},{key:"formGroupMarkTouched",value:function(e){var t=this;Object.keys(e.controls).forEach((function(o){e.controls[o].markAsTouched(),e.controls[o]instanceof n.c&&Array.from(t.form.controls[o].controls).forEach((function(e){t.formGroupMarkTouched(e)}))}))}},{key:"getSaveRequest",value:function(e){return e.id||"root"===e.name?this.dataService.update(e):this.dataService.create(e)}},{key:"getFormData",value:function(){var e=this.form.value;return e.id=this.model.id||0,void 0!==this.model.translations&&(e.translations=this.model.translations||null),e}},{key:"arrayFieldDelete",value:function(e,t,o){o&&o.preventDefault(),this.arrayFields[e].removeAt(t)}},{key:"arrayFieldAdd",value:function(e,t){t&&t.preventDefault();var o=this.getFormFieldByName(e);if(o){var n=this.buildControls(null,o.children,null);this.arrayFields[e].push(this.fb.group(n))}}},{key:"closeModal",value:function(e){e&&e.preventDefault(),this.close(this.closeReason)}},{key:"close",value:function(e,t){t&&t.preventDefault(),"submit"===e?this.activeModal.close(e):this.activeModal.dismiss(e)}},{key:"minimize",value:function(e){e&&e.preventDefault(),window.document.body.classList.remove("modal-open");var t=this.getRootElement(),o=t.previousElementSibling;t.classList.remove("d-block"),t.classList.add("modal-minimized"),o.classList.add("d-none")}},{key:"maximize",value:function(e){e&&e.preventDefault(),window.document.body.classList.add("modal-open");var t=this.getRootElement(),o=t.previousElementSibling;t.classList.add("d-block"),t.classList.remove("modal-minimized"),o.classList.remove("d-none")}},{key:"save",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;t&&t.preventDefault(),this.onSubmit(e)}},{key:"saveFiles",value:function(e){var t=this;if(0!==Object.keys(this.files).length){var o=new FormData;for(var n in this.files)this.files.hasOwnProperty(n)&&this.files[n]instanceof File&&o.append(n,this.files[n],this.files[n].name);o.append("itemId",String(e)),this.dataService.postFormData(o).pipe(Object(r.a)(this.destroyed$)).subscribe({next:function(){t.close("submit")},error:function(e){t.errorMessage=e.error||t.getLangString("ERROR"),t.submitted=!1,t.loading=!1}})}else this.close("submit")}},{key:"onSubmit",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.formGroupMarkTouched(this.form),!this.form.valid)return this.errorMessage=this.getLangString("PLEASE_FIX_FORM_ERRORS"),void this.focusFormError();this.errorMessage="",this.loading=!0,this.submitted=!0;var o=this.getFormData();this.getSaveRequest(o).pipe(Object(r.a)(this.destroyed$)).subscribe({next:function(o){Object.keys(e.files).length>0?e.saveFiles(o._id||o.id):t&&e.close("submit"),o&&o.id&&(e.model.id=o.id),e.closeReason="updated",e.loading=!1,e.submitted=!1},error:function(t){t.error&&(e.errorMessage=t.error),t.errors&&(e.formErrors=t.errors,e.errorMessage=e.getLangString("PLEASE_FIX_FORM_ERRORS")),e.loading=!1,e.submitted=!1}})}},{key:"onLocaleSwitch",value:function(){var e=this;if(this.localeCurrent===this.localeDefault)return this.localeFieldsAllowed.forEach((function(t){e.model[t]=e.localePreviousValues[t],e.getControl(e.form,null,t).setValue(e.localePreviousValues[t])})),void(this.isSaveButtonDisabled=!1);this.model.translations||(this.model.translations={}),this.isSaveButtonDisabled=!0,this.localeFieldsAllowed.forEach((function(t){e.localePreviousValues[t]=e.getControl(e.form,null,t).value,e.model.translations[t]?(e.model[t]=e.model.translations[t][e.localeCurrent]||"",e.getControl(e.form,null,t).setValue(e.model[t])):(e.model[t]="",e.getControl(e.form,null,t).setValue(""))}))}},{key:"saveTranslations",value:function(e){var t=this;e&&e.preventDefault(),this.localeFieldsAllowed.forEach((function(e){t.getControl(t.form,null,e)&&t.getControl(t.form,null,e).value?(t.model.translations[e]||(t.model.translations[e]={}),t.model.translations[e][t.localeCurrent]=t.getControl(t.form,null,e).value):t.model.translations[e]&&(t.model.translations[e][t.localeCurrent]&&delete t.model.translations[e][t.localeCurrent],0===Object.keys(t.model.translations[e]).length&&delete t.model.translations[e])})),this.localeCurrent=this.localeDefault,this.onLocaleSwitch()}},{key:"emailValidator",value:function(e){return e.value?/\S+@\S+\.\S+/.test(e.value)?void 0:{email:!0}:{required:!0}}},{key:"getRootElement",value:function(){return this.elRef.nativeElement.parentNode.parentNode.parentNode}},{key:"createUniqueId",value:function(){return Math.random().toString(36).substr(2,9)}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}},{key:"formErrors",set:function(e){for(var t in e)if(e.hasOwnProperty(t)){var o=this.getControl(this.form,null,t);o&&o.setErrors({incorrect:!0})}this._formFieldsErrors=e},get:function(){return this._formFieldsErrors}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Qb(n.e),s.Qb(l.b),s.Qb(c.d),s.Qb(a.a),s.Qb(s.l))},e.\u0275dir=s.Lb({type:e,viewQuery:function(e,t){var o;1&e&&s.Sc(d,!0),2&e&&s.Cc(o=s.jc())&&(t.formEl=o.first)},inputs:{modalTitle:"modalTitle",itemId:"itemId",modalId:"modalId",isItemCopy:"isItemCopy",isEditMode:"isEditMode"}}),e}()},zrcO:function(e,t,o){"use strict";o.r(t);var n,i=o("SVse"),r=o("d2mR"),a=o("iInd"),s=o("s7LF"),l=o("1G5W"),c=o("lJxs"),d=o("LvDl"),u=function e(t,o,n,i,r,a,s,l,c,d,u){_classCallCheck(this,e),this.id=t,this.email=o,this.fullName=n,this.roles=i,this.isActive=r,this.options=a,this.role=s,this.phone=l,this.password=c,this.confirmPassword=d,this.apiToken=u},b=o("4p3S"),m=o("JIr8"),f=o("7AsP"),h=o("8Y7J"),p=o("IheW"),v=((n=function(e){_inherits(o,e);var t=_createSuper(o);function o(e){var n;return _classCallCheck(this,o),(n=t.call(this,e)).setRequestUrl("/admin/users"),n}return _createClass(o,[{key:"getRolesList",value:function(){var e=this.getRequestUrl()+"/roles";return this.http.get(e,{headers:this.headers}).pipe(Object(m.a)(this.handleError()))}},{key:"createApiToken",value:function(){var e=this.getRequestUrl()+"/create_api_token";return this.http.post(e,{},{headers:this.headers}).pipe(Object(m.a)(this.handleError()))}}]),o}(f.a)).\u0275fac=function(e){return new(e||n)(h.ec(p.a))},n.\u0275prov=h.Mb({token:n,factory:n.\u0275fac}),n),g=o("wgQU"),y=o("RwQR"),k=o("ot8b"),S=o("G0yt"),E=o("TSSN"),O=o("hecf");function R(e,t){if(1&e&&(h.Wb(0,"div",52),h.Oc(1),h.Vb()),2&e){var o=h.kc();h.Db(1),h.Qc(" ",o.formErrors.email," ")}}function C(e,t){if(1&e&&(h.Wb(0,"div",52),h.Oc(1),h.Vb()),2&e){var o=h.kc();h.Db(1),h.Qc(" ",o.formErrors.fullName," ")}}function D(e,t){if(1&e&&(h.Wb(0,"div",52),h.Oc(1),h.Vb()),2&e){var o=h.kc();h.Db(1),h.Qc(" ",o.formErrors.phone," ")}}function V(e,t){if(1&e&&(h.Ub(0),h.Wb(1,"option",53),h.Oc(2),h.Vb(),h.Tb()),2&e){var o=t.$implicit;h.Db(1),h.rc("value",o.name),h.Db(1),h.Pc(o.title)}}function w(e,t){if(1&e&&(h.Wb(0,"div",52),h.Oc(1),h.Vb()),2&e){var o=h.kc();h.Db(1),h.Qc(" ",o.formErrors.password," ")}}function I(e,t){if(1&e&&(h.Wb(0,"div",52),h.Oc(1),h.Vb()),2&e){var o=h.kc();h.Db(1),h.Qc(" ",o.formErrors.password," ")}}function W(e,t){if(1&e&&(h.Wb(0,"div",52),h.Oc(1),h.Vb()),2&e){var o=h.kc();h.Db(1),h.Qc(" ",o.formErrors.confirmPassword," ")}}var _=function(e){return{"is-invalid":e}};function L(e,t){if(1&e){var o=h.Xb();h.Wb(0,"tr",65),h.Wb(1,"td"),h.Rb(2,"input",66),h.Vb(),h.Wb(3,"td"),h.Rb(4,"input",67),h.Vb(),h.Wb(5,"td",68),h.Rb(6,"input",69),h.Vb(),h.Wb(7,"td",68),h.Wb(8,"button",70),h.ic("click",(function(e){h.Ec(o);var n=t.index;return h.kc(3).arrayFieldDelete("options",n,e)})),h.lc(9,"translate"),h.Rb(10,"i",11),h.Vb(),h.Vb(),h.Vb()}if(2&e){var n=t.$implicit;h.rc("formGroupName",t.index+""),h.Db(2),h.rc("ngClass",h.wc(7,_,n.controls.name.touched&&!n.controls.name.valid)),h.Db(2),h.rc("ngClass",h.wc(9,_,n.controls.title.touched&&!n.controls.title.valid)),h.Db(2),h.rc("ngClass",h.wc(11,_,n.controls.value.touched&&!n.controls.value.valid)),h.Db(2),h.sc("ngbTooltip",h.mc(9,5,"DELETE"))}}function M(e,t){if(1&e&&(h.Wb(0,"tbody"),h.Mc(1,L,11,13,"tr",64),h.Vb()),2&e){var o=h.kc(2);h.Db(1),h.rc("ngForOf",o.arrayFields.options.controls)}}function A(e,t){if(1&e){var o=h.Xb();h.Wb(0,"div",54),h.Wb(1,"table",55),h.Wb(2,"colgroup"),h.Rb(3,"col",56),h.Rb(4,"col",56),h.Rb(5,"col",57),h.Rb(6,"col",58),h.Vb(),h.Wb(7,"thead"),h.Wb(8,"tr"),h.Wb(9,"th"),h.Oc(10),h.lc(11,"translate"),h.Vb(),h.Wb(12,"th"),h.Oc(13),h.lc(14,"translate"),h.Vb(),h.Wb(15,"th"),h.Oc(16),h.lc(17,"translate"),h.Vb(),h.Rb(18,"th"),h.Vb(),h.Vb(),h.Mc(19,M,2,1,"tbody",59),h.Wb(20,"tfoot"),h.Wb(21,"tr",60),h.Wb(22,"td",61),h.Wb(23,"button",62),h.ic("click",(function(e){return h.Ec(o),h.kc().arrayFieldAdd("options",e)})),h.Rb(24,"i",63),h.Oc(25," \xa0 "),h.Wb(26,"span"),h.Oc(27),h.lc(28,"translate"),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb()}if(2&e){var n=h.kc();h.Db(10),h.Pc(h.mc(11,5,"SYSTEM_NAME")),h.Db(3),h.Pc(h.mc(14,7,"NAME")),h.Db(3),h.Pc(h.mc(17,9,"VALUE")),h.Db(3),h.rc("ngIf",n.arrayFields.options),h.Db(8),h.Pc(h.mc(28,11,"ADD"))}}function T(e,t){if(1&e){var o=h.Xb();h.Wb(0,"div",71),h.Wb(1,"button",72),h.ic("click",(function(){return h.Ec(o),h.kc().errorMessage=""})),h.Wb(2,"span",73),h.Oc(3,"\xd7"),h.Vb(),h.Vb(),h.Oc(4),h.Vb()}if(2&e){var n=h.kc();h.Db(4),h.Qc(" ",n.errorMessage," ")}}function N(e,t){if(1&e&&(h.Wb(0,"div",74),h.Wb(1,"a",75),h.Wb(2,"span"),h.Oc(3),h.lc(4,"translate"),h.Vb(),h.Vb(),h.Vb()),2&e){var o=h.kc();h.Db(1),h.uc("href","",o.baseUrl,"?_switch_user=",o.model.email,"",h.Gc),h.Db(2),h.Pc(h.mc(4,3,"IMPERSONATION"))}}var P,F,q,Q=function(e){return{"no-events":e}},x=function(e){return{"form-control-search-clear":e}},U=((P=function(e){_inherits(o,e);var t=_createSuper(o);function o(e,n,i,r,a,l){var c;return _classCallCheck(this,o),(c=t.call(this,e,n,i,r,a)).fb=e,c.activeModal=n,c.translateService=i,c.dataService=r,c.elRef=a,c.appSettings=l,c.allowImpersonation=!1,c.model=new u(0,"","",[],!0,[]),c.formFields=[{name:"email",validators:[s.w.required,c.emailValidator]},{name:"fullName",validators:[s.w.required]},{name:"phone",validators:[]},{name:"role",validators:[s.w.required]},{name:"isActive",validators:[]},{name:"password",validators:[]},{name:"confirmPassword",validators:[]},{name:"apiToken",validators:[]},{name:"options",validators:[],children:[{name:"name",validators:[s.w.required]},{name:"title",validators:[s.w.required]},{name:"value",validators:[s.w.required]}]}],c}return _createClass(o,[{key:"onBeforeInit",value:function(){if(!this.isEditMode){var e=Object(d.findIndex)(this.formFields,{name:"password"});e>-1&&(this.formFields[e].validators.push(s.w.required),this.formFields[e+1].validators.push(s.w.required))}this.baseUrl=g.a.getBaseUrl(),this.getUserRoles()}},{key:"onAfterGetData",value:function(){this.buildControls(this.form,this.formFields),this.isEditMode&&this.appSettings.isSuperAdmin&&this.appSettings.settings.userEmail!==this.model.email&&(this.allowImpersonation=!0)}},{key:"getUserRoles",value:function(){this.userRoles$=this.dataService.getRolesList().pipe(Object(l.a)(this.destroyed$),Object(c.a)((function(e){return e.roles})))}},{key:"clearApiToken",value:function(e){e&&e.preventDefault(),this.getControl(this.form,null,"apiToken").setValue("")}},{key:"generateApiToken",value:function(e){var t=this;e&&e.preventDefault(),this.loading=!0,this.dataService.createApiToken().pipe(Object(l.a)(this.destroyed$)).subscribe({next:function(e){t.getControl(t.form,null,"apiToken").setValue(e.token),t.loading=!1},error:function(e){t.errorMessage=e.error||t.getLangString("ERROR"),t.loading=!1}})}}]),o}(k.a)).\u0275fac=function(e){return new(e||P)(h.Qb(s.e),h.Qb(S.b),h.Qb(E.d),h.Qb(v),h.Qb(h.l),h.Qb(g.a))},P.\u0275cmp=h.Kb({type:P,selectors:[["app-modal-user"]],features:[h.Cb([]),h.Ab],decls:119,vars:96,consts:[[1,"position-relative","modal-on-maximized"],[1,"tabs-top"],["type","button",1,"btn","btn-outline-primary","btn-sm","d-block",3,"disabled","click"],[1,"icon-cross","mr-1"],[1,"icon-minimize","mr-1"],[1,"modal-header","d-block"],[1,"position-relative","modal-on-minimized"],[1,"pos-absolute-right"],["type","button",1,"btn","btn-no-border","btn-sm-sm",3,"title","click"],[1,"icon-maximize"],["type","button",1,"btn","btn-no-border","btn-sm-sm","ml-1",3,"title","click"],[1,"icon-cross"],[1,"modal-title","text-overflow","mr-5"],["method","post",3,"formGroup","ngClass","ngSubmit"],["formEl",""],[1,"modal-body","py-0"],[1,"row"],[1,"col-lg-6"],[1,"form-group","form-group-message"],[1,"label-filled"],["type","text","autocomplete","off","formControlName","email",1,"form-control",3,"ngClass"],["class","alert alert-danger",4,"ngIf"],["type","text","autocomplete","off","formControlName","fullName",1,"form-control",3,"ngClass"],["type","text","formControlName","phone","autocomplete","off",1,"form-control"],["formControlName","role",1,"custom-select",3,"ngClass"],[4,"ngFor","ngForOf"],["type","password","autocomplete","off","formControlName","password",1,"form-control",3,"ngClass"],["type","password","autocomplete","off","formControlName","confirmPassword",1,"form-control",3,"ngClass"],[1,"form-group"],[1,"input-group"],["type","text","name","apiToken","autocomplete","off","formControlName","apiToken",1,"form-control"],[1,"input-group-append"],["type","button","container","body",1,"btn","btn-secondary",3,"ngbTooltip","click"],[1,"icon-reload"],[1,"form-group","mt-0","mt-lg-4"],[1,"card","card-body","p-2","pl-3"],[1,"custom-control","custom-checkbox","m-0"],["type","checkbox","value","1","formControlName","isActive",1,"custom-control-input",3,"id"],[1,"custom-control-label",3,"for"],["activeIds","accordion-user-options",1,"ngb-accordion",3,"closeOthers"],["id","accordion-user-options",3,"title"],["ngbPanelContent",""],["class","alert alert-danger mt-3 mb-0",4,"ngIf"],[1,"modal-footer","display-block"],["class","float-right",4,"ngIf"],[1,"btn-group","mr-1"],["type","button",1,"btn","btn-success","btn-wide",3,"disabled","click"],["ngbDropdown","","role","group","placement","top-right",1,"btn-group"],["type","button","ngbDropdownToggle","",1,"btn","btn-success","dropdown-toggle-split",3,"disabled"],["ngbDropdownMenu","",1,"dropdown-menu"],["type","button","ngbDropdownItem","",3,"click"],["type","button",1,"btn","btn-secondary","btn-wide",3,"click"],[1,"alert","alert-danger"],[3,"value"],["formArrayName","options"],[1,"table","table-bordered","mb-0"],["width","27%"],["width","39%"],["width","7%"],[4,"ngIf"],[1,"bg-faded"],["colspan","4",1,"text-center"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"icon-plus"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],["type","text","formControlName","name",1,"form-control","form-control-sm",3,"ngClass"],["type","text","formControlName","title",1,"form-control","form-control-sm",3,"ngClass"],[1,"text-center"],["type","text","formControlName","value",1,"form-control","form-control-sm",3,"ngClass"],["type","button",1,"btn","btn-secondary","btn-sm",3,"ngbTooltip","click"],[1,"alert","alert-danger","mt-3","mb-0"],["type","button",1,"close",3,"click"],["aria-hidden","true"],[1,"float-right"],[1,"btn","btn-primary",3,"href"]],template:function(e,t){1&e&&(h.Wb(0,"div",0),h.Wb(1,"div",1),h.Wb(2,"button",2),h.ic("click",(function(e){return t.closeModal(e)})),h.Rb(3,"i",3),h.Wb(4,"span"),h.Oc(5),h.lc(6,"translate"),h.Vb(),h.Vb(),h.Wb(7,"button",2),h.ic("click",(function(e){return t.minimize(e)})),h.Rb(8,"i",4),h.Wb(9,"span"),h.Oc(10),h.lc(11,"translate"),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Wb(12,"div",5),h.Wb(13,"div",6),h.Wb(14,"div",7),h.Wb(15,"button",8),h.ic("click",(function(e){return t.maximize(e)})),h.lc(16,"translate"),h.Rb(17,"i",9),h.Vb(),h.Wb(18,"button",10),h.ic("click",(function(e){return t.closeModal(e)})),h.lc(19,"translate"),h.Rb(20,"i",11),h.Vb(),h.Vb(),h.Vb(),h.Wb(21,"h4",12),h.Oc(22),h.Vb(),h.Vb(),h.Wb(23,"form",13,14),h.ic("ngSubmit",(function(){return t.onSubmit()})),h.Wb(25,"div",15),h.Wb(26,"div",16),h.Wb(27,"div",17),h.Wb(28,"div",18),h.Wb(29,"label",19),h.Oc(30),h.lc(31,"translate"),h.Vb(),h.Rb(32,"input",20),h.Mc(33,R,2,1,"div",21),h.Vb(),h.Vb(),h.Wb(34,"div",17),h.Wb(35,"div",18),h.Wb(36,"label",19),h.Oc(37),h.lc(38,"translate"),h.Vb(),h.Rb(39,"input",22),h.Mc(40,C,2,1,"div",21),h.Vb(),h.Vb(),h.Vb(),h.Wb(41,"div",16),h.Wb(42,"div",17),h.Wb(43,"div",18),h.Wb(44,"label",19),h.Oc(45),h.lc(46,"translate"),h.Vb(),h.Rb(47,"input",23),h.Mc(48,D,2,1,"div",21),h.Vb(),h.Vb(),h.Wb(49,"div",17),h.Wb(50,"div",18),h.Wb(51,"label",19),h.Oc(52),h.lc(53,"translate"),h.Vb(),h.Wb(54,"select",24),h.Mc(55,V,3,2,"ng-container",25),h.lc(56,"async"),h.Vb(),h.Mc(57,w,2,1,"div",21),h.Vb(),h.Vb(),h.Vb(),h.Wb(58,"div",16),h.Wb(59,"div",17),h.Wb(60,"div",18),h.Wb(61,"label",19),h.Oc(62),h.lc(63,"translate"),h.Vb(),h.Rb(64,"input",26),h.Mc(65,I,2,1,"div",21),h.Vb(),h.Vb(),h.Wb(66,"div",17),h.Wb(67,"div",18),h.Wb(68,"label",19),h.Oc(69),h.lc(70,"translate"),h.Vb(),h.Rb(71,"input",27),h.Mc(72,W,2,1,"div",21),h.Vb(),h.Vb(),h.Vb(),h.Wb(73,"div",16),h.Wb(74,"div",17),h.Wb(75,"div",28),h.Wb(76,"label",19),h.Oc(77),h.lc(78,"translate"),h.Vb(),h.Wb(79,"div",29),h.Rb(80,"input",30),h.Wb(81,"div",31),h.Wb(82,"button",32),h.ic("click",(function(e){return t.clearApiToken(e)})),h.lc(83,"translate"),h.Rb(84,"i",11),h.Vb(),h.Wb(85,"button",32),h.ic("click",(function(e){return t.generateApiToken(e)})),h.lc(86,"translate"),h.Rb(87,"i",33),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Wb(88,"div",17),h.Wb(89,"div",28),h.Wb(90,"div",34),h.Wb(91,"div",35),h.Wb(92,"div",36),h.Rb(93,"input",37),h.Wb(94,"label",38),h.Oc(95),h.lc(96,"translate"),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Wb(97,"ngb-accordion",39),h.Wb(98,"ngb-panel",40),h.lc(99,"translate"),h.Mc(100,A,29,13,"ng-template",41),h.Vb(),h.Vb(),h.Mc(101,T,5,1,"div",42),h.Vb(),h.Wb(102,"div",43),h.Mc(103,N,5,5,"div",44),h.Wb(104,"div",45),h.Wb(105,"button",46),h.ic("click",(function(e){return t.save(!0,e)})),h.Wb(106,"span"),h.Oc(107),h.lc(108,"translate"),h.Vb(),h.Vb(),h.Wb(109,"div",47),h.Rb(110,"button",48),h.Wb(111,"div",49),h.Wb(112,"button",50),h.ic("click",(function(e){return t.save(!1,e)})),h.Oc(113),h.lc(114,"translate"),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Wb(115,"button",51),h.ic("click",(function(e){return t.closeModal(e)})),h.Wb(116,"span"),h.Oc(117),h.lc(118,"translate"),h.Vb(),h.Vb(),h.Vb(),h.Vb()),2&e&&(h.Db(2),h.rc("disabled",t.submitted),h.Db(3),h.Pc(h.mc(6,46,"CLOSE")),h.Db(2),h.rc("disabled",t.submitted),h.Db(3),h.Pc(h.mc(11,48,"MINIMIZE")),h.Db(5),h.rc("title",h.mc(16,50,"EXPAND")),h.Db(3),h.rc("title",h.mc(19,52,"CLOSE")),h.Db(4),h.Pc(t.modalTitle),h.Db(1),h.rc("formGroup",t.form)("ngClass",h.wc(84,Q,t.submitted)),h.Db(2),h.Ib("loading",t.loading),h.Db(5),h.Qc(" ",h.mc(31,54,"EMAIL")," "),h.Db(2),h.rc("ngClass",h.wc(86,_,t.form.controls.email.touched&&!t.form.controls.email.valid)),h.Db(1),h.rc("ngIf",t.formErrors.email),h.Db(4),h.Qc(" ",h.mc(38,56,"FULL_NAME")," "),h.Db(2),h.rc("ngClass",h.wc(88,_,t.form.controls.fullName.touched&&!t.form.controls.fullName.valid)),h.Db(1),h.rc("ngIf",t.formErrors.fullName),h.Db(5),h.Qc(" ",h.mc(46,58,"PHONE")," "),h.Db(3),h.rc("ngIf",t.formErrors.phone),h.Db(4),h.Qc(" ",h.mc(53,60,"ROLE")," "),h.Db(2),h.rc("ngClass",h.wc(90,_,t.form.controls.role.touched&&!t.form.controls.role.valid)),h.Db(1),h.rc("ngForOf",h.mc(56,62,t.userRoles$)),h.Db(2),h.rc("ngIf",t.formErrors.password),h.Db(5),h.Qc(" ",h.mc(63,64,"PASSWORD")," "),h.Db(2),h.rc("ngClass",h.wc(92,_,t.form.controls.password.touched&&!t.form.controls.password.valid)),h.Db(1),h.rc("ngIf",t.formErrors.password),h.Db(4),h.Qc(" ",h.mc(70,66,"CONFIRM_PASSWORD")," "),h.Db(2),h.rc("ngClass",h.wc(94,_,t.form.controls.confirmPassword.touched&&!t.form.controls.confirmPassword.valid)),h.Db(1),h.rc("ngIf",t.formErrors.confirmPassword),h.Db(5),h.Qc(" ",h.mc(78,68,"API_TOKEN")," "),h.Db(2),h.Ib("is-invalid",t.formErrors.name),h.Db(3),h.sc("ngbTooltip",h.mc(83,70,"CLEAR")),h.Db(3),h.sc("ngbTooltip",h.mc(86,72,"GENERATE")),h.Db(8),h.tc("id","fieldIsActive",t.model.id,""),h.Db(1),h.tc("for","fieldIsActive",t.model.id,""),h.Db(1),h.Pc(h.mc(96,74,"ACTIVE")),h.Db(2),h.rc("closeOthers",!0),h.Db(1),h.rc("title",h.mc(99,76,"OPTIONS")),h.Db(3),h.rc("ngIf",t.errorMessage),h.Db(2),h.rc("ngIf",t.allowImpersonation),h.Db(2),h.rc("disabled",t.submitted),h.Db(2),h.Pc(h.mc(108,78,"SAVE_AND_CLOSE")),h.Db(3),h.rc("disabled",t.submitted),h.Db(3),h.Pc(h.mc(114,80,"SAVE")),h.Db(4),h.Pc(h.mc(118,82,"CLOSE")))},directives:[s.y,s.o,s.h,i.n,s.b,s.n,s.g,i.p,s.v,i.o,S.u,s.a,S.a,S.k,S.l,S.d,S.g,S.f,S.e,s.r,s.x,s.d,s.i],pipes:[E.c,i.b],encapsulation:2}),P),j=[{path:"",redirectTo:"/users/",pathMatch:"full"},{path:":userEmail",component:(F=function(e){_inherits(o,e);var t=_createSuper(o);function o(e,n,i,r,a,s){var l;return _classCallCheck(this,o),(l=t.call(this,e,n,i,r)).dataService=e,l.activeModal=n,l.modalService=i,l.translateService=r,l.route=a,l.router=s,l.queryOptions=new y.a("id","desc",1,10,0,0),l.tableFields=[{name:"id",sortName:"id",title:"ID",outputType:"text",outputProperties:{}},{name:"email",sortName:"email",title:"EMAIL",outputType:"text",outputProperties:{}},{name:"fullName",sortName:"fullName",title:"FULL_NAME",outputType:"text",outputProperties:{}},{name:"role",sortName:"roles",title:"ROLE",outputType:"userRole",outputProperties:{}},{name:"createdDate",sortName:"createdDate",title:"DATE_TIME",outputType:"date",outputProperties:{format:"dd/MM/y H:mm:s"}},{name:"isActive",sortName:"isActive",title:"STATUS",outputType:"boolean",outputProperties:{}}],l}return _createClass(o,[{key:"ngOnInit",value:function(){this.afterInit()}},{key:"afterInit",value:function(){var e=this;this.route.paramMap.subscribe((function(t){e.queryOptions.search_word=t.get("userEmail"),e.getList()}))}},{key:"onSearchClear",value:function(){this.route.snapshot.url&&this.route.snapshot.url[0].path?this.router.navigate(["/users",""]):this.getList()}},{key:"setModalInputs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=void 0!==e&&!t;this.modalRef.componentInstance.modalTitle=n?"".concat(this.getLangString("USER")," #").concat(e):this.getLangString("ADD_USER"),this.modalRef.componentInstance.modalId=o,this.modalRef.componentInstance.itemId=e||0,this.modalRef.componentInstance.isItemCopy=t||!1,this.modalRef.componentInstance.isEditMode=n}},{key:"getModalElementId",value:function(e){return["modal","user",e||0].join("-")}},{key:"getModalContent",value:function(){return U}},{key:"changeRequest",value:function(e){}}]),o}(b.a),F.title="USERS",F.\u0275fac=function(e){return new(e||F)(h.Qb(v),h.Qb(S.b),h.Qb(S.h),h.Qb(E.d),h.Qb(a.a),h.Qb(a.c))},F.\u0275cmp=h.Kb({type:F,selectors:[["app-shk-users"]],features:[h.Cb([v]),h.Ab],decls:37,vars:29,consts:[[1,"card"],[1,"card-body"],[1,"icon-head"],[1,"mb-3"],[1,"float-md-left"],[1,"form-control-search","mb-2","mb-md-0",3,"ngClass"],["type","text",1,"form-control","min-width250",3,"placeholder","ngModel","ngModelChange"],[3,"click"],[1,"float-md-right"],["ngbDropdown","","placement","bottom-right",1,"d-block","d-md-inline-block","mb-2","mb-md-0"],["ngbDropdownToggle","",1,"btn","btn-info","d-block","d-md-inline-block","width-100","width-md-auto"],["ngbDropdownMenu",""],[1,"dropdown-item",3,"click"],["type","button",1,"btn","btn-success","btn-wide","d-block","d-md-inline-block","width-100","width-md-auto","ml-md-2","mb-2","mb-md-0",3,"click"],[1,"icon-plus"],[1,"float-left"],[1,"clearfix"],[1,"min-height400"],[3,"items","selectedIds","collectionSize","queryOptions","tableFields","loading","isCloneAllowed","selectedIdsChange","loadingChange","actionRequest","changeRequest"],["table",""]],template:function(e,t){1&e&&(h.Wb(0,"div",0),h.Wb(1,"div",1),h.Wb(2,"h3"),h.Rb(3,"i",2),h.Oc(4),h.lc(5,"translate"),h.Vb(),h.Rb(6,"hr"),h.Wb(7,"div",3),h.Wb(8,"div",4),h.Wb(9,"div",5),h.Wb(10,"input",6),h.ic("ngModelChange",(function(e){return t.queryOptions.search_word=e}))("ngModelChange",(function(){return t.onSearchWordUpdate()})),h.lc(11,"translate"),h.Vb(),h.Wb(12,"span",7),h.ic("click",(function(){return t.onSearchWordUpdate("")})),h.Vb(),h.Vb(),h.Vb(),h.Wb(13,"div",8),h.Wb(14,"div",9),h.Wb(15,"button",10),h.Wb(16,"span"),h.Oc(17),h.lc(18,"translate"),h.Vb(),h.Vb(),h.Wb(19,"div",11),h.Wb(20,"button",12),h.ic("click",(function(){return t.blockSelected()})),h.Oc(21),h.lc(22,"translate"),h.Vb(),h.Wb(23,"button",12),h.ic("click",(function(){return t.deleteSelected()})),h.Oc(24),h.lc(25,"translate"),h.Vb(),h.Vb(),h.Vb(),h.Wb(26,"button",13),h.ic("click",(function(){return t.modalOpen()})),h.Rb(27,"i",14),h.Oc(28," \xa0 "),h.Wb(29,"span"),h.Oc(30),h.lc(31,"translate"),h.Vb(),h.Vb(),h.Vb(),h.Rb(32,"div",15),h.Rb(33,"div",16),h.Vb(),h.Wb(34,"div",17),h.Wb(35,"app-table",18,19),h.ic("selectedIdsChange",(function(e){return t.selectedIds=e}))("loadingChange",(function(e){return t.loading=e}))("actionRequest",(function(e){return t.actionRequest(e)}))("changeRequest",(function(e){return t.changeRequest(e)})),h.Vb(),h.Vb(),h.Vb(),h.Vb()),2&e&&(h.Db(4),h.Qc(" ",h.mc(5,15,"USERS")," "),h.Db(5),h.rc("ngClass",h.wc(27,x,!!t.queryOptions.search_word)),h.Db(1),h.tc("placeholder","",h.mc(11,17,"SEARCH"),"..."),h.rc("ngModel",t.queryOptions.search_word),h.Db(7),h.Pc(h.mc(18,19,"BATCH_ACTIONS")),h.Db(4),h.Pc(h.mc(22,21,"DISABLE_ENABLE")),h.Db(3),h.Pc(h.mc(25,23,"DELETE")),h.Db(6),h.Pc(h.mc(31,25,"ADD")),h.Db(5),h.rc("items",t.items)("selectedIds",t.selectedIds)("collectionSize",t.collectionSize)("queryOptions",t.queryOptions)("tableFields",t.tableFields)("loading",t.loading)("isCloneAllowed",!1))},directives:[i.n,s.b,s.n,s.q,S.d,S.g,S.f,O.a],pipes:[E.c],encapsulation:2}),F)}],G=((q=function e(){_classCallCheck(this,e)}).\u0275mod=h.Ob({type:q}),q.\u0275inj=h.Nb({factory:function(e){return new(e||q)},imports:[[a.f.forChild(j)],a.f]}),q);o.d(t,"UsersModule",(function(){return $}));var z,$=((z=function e(){_classCallCheck(this,e)}).\u0275mod=h.Ob({type:z}),z.\u0275inj=h.Nb({factory:function(e){return new(e||z)},providers:[v],imports:[[i.c,r.a,G]]}),z)}}]);