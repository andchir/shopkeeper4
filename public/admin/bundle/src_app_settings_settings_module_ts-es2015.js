(self.webpackChunkshk_app=self.webpackChunkshk_app||[]).push([["src_app_settings_settings_module_ts"],{11026:function(t,e,n){"use strict";n.d(e,{e:function(){return i}});class i{constructor(t,e,n,i,s){this.changed=t,this.loading=e,this.values=n,this.defaultOptions=i,this.defaultValues=s}}},65092:function(t,e,n){"use strict";n.r(e),n.d(e,{SettingsModule:function(){return lt}});var i=n(61116),s=n(49684),o=n(9883),a=n(55959),r=n(25416),l=n(78194),g=n(92290),c=n(11026),u=n(93724),Z=n(89223),T=n(13029),d=n(35366),p=n(72431),S=n(60649);const A=["filesWidget"];function E(t,e){1&t&&d._UZ(0,"i",16)}function h(t,e){1&t&&d._UZ(0,"i",16)}function _(t,e){1&t&&d._UZ(0,"i",16)}function N(t,e){1&t&&d._UZ(0,"i",17)}function q(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",18),d._UZ(1,"app-file-widget",19,20),d.TgZ(3,"div",21),d.TgZ(4,"button",22),d.NdJ("click",function(e){return d.CHM(t),d.oxw().skipStepHandler(e)}),d._uU(5),d.ALo(6,"translate"),d.qZA(),d.qZA(),d.qZA()}2&t&&(d.xp6(1),d.Q6J("hasPreviewImage",!1)("allowMultiple",!1)("allowedExtensions",".zip"),d.xp6(4),d.hij(" ",d.lcZ(6,4,"SKIP")," "))}function f(t,e){if(1&t&&(d.TgZ(0,"pre",28),d._uU(1),d.qZA()),2&t){const t=d.oxw(2);d.xp6(1),d.Oqu(t.changelogContent)}}function m(t,e){if(1&t&&(d.TgZ(0,"div"),d.TgZ(1,"div",23),d._uU(2),d.ALo(3,"translate"),d.TgZ(4,"span"),d._uU(5),d.qZA(),d._UZ(6,"br"),d._uU(7),d.ALo(8,"translate"),d.TgZ(9,"b",24),d._uU(10),d.qZA(),d.qZA(),d.TgZ(11,"ngb-accordion",25),d.TgZ(12,"ngb-panel",26),d.ALo(13,"translate"),d.YNc(14,f,2,1,"ng-template",27),d.qZA(),d.qZA(),d.qZA()),2&t){const t=d.oxw();d.xp6(2),d.hij(" ",d.lcZ(3,5,"CURRENT_VERSION"),": "),d.xp6(3),d.Oqu(t.currentVersion),d.xp6(2),d.hij(" ",d.lcZ(8,7,"NEW_VERSION"),": "),d.xp6(3),d.Oqu(t.version),d.xp6(2),d.Q6J("title",d.lcZ(13,9,"CHANGELOG"))}}function C(t,e){if(1&t&&(d.TgZ(0,"div",29),d._UZ(1,"ngb-progressbar",30),d.qZA()),2&t){const t=d.oxw();d.xp6(1),d.Q6J("striped",!0)("animated",!0)("value",t.updatePercent)("showValue",!0)}}function U(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",31),d._uU(1),d.ALo(2,"translate"),d.TgZ(3,"button",32),d.NdJ("click",function(){return d.CHM(t),d.oxw().errorMessage=""}),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.xp6(1),d.hij(" ",d.lcZ(2,1,t.errorMessage)," ")}}const x=function(t){return{"no-events loading":t}},I=function(t){return{"text-muted":t}};let b=(()=>{class t{constructor(t,e,n){this.activeModal=t,this.dataService=e,this.appSettings=n,this.loading=!1,this.destroyed$=new a.xQ,this.stepNumber=1,this.updatePercent=0,this.isUpdateStarted=!1,this.isCollapsed=!0}ngOnInit(){this.currentVersion=this.appSettings.settings.version}nextStepHandler(t){switch(t&&t.preventDefault(),this.errorMessage="",this.stepNumber){case 1:if(0===this.filesWidget.filesRaw.length)return void(this.errorMessage="PLEASE_SELECT_FILE");this.isUpdateStarted=!1;const t=new FormData;t.append("file",this.filesWidget.filesRaw[0]),this.loading=!0,this.dataService.postFormData(t,"admin/system_update/upload").pipe((0,r.R)(this.destroyed$)).subscribe({next:t=>{this.loading=!1,this.stepNumber=2},error:t=>{t.error&&(this.errorMessage=t.error),this.loading=!1}});break;case 2:this.loading=!0,this.dataService.runAction("admin/system_update/pre_update").pipe((0,r.R)(this.destroyed$)).subscribe({next:t=>{this.stepNumber=3,this.version=t.version||"",this.changelogContent=t.changelogContent||"",this.loading=!1},error:t=>{t.error&&(this.errorMessage=t.error),this.loading=!1}});break;case 3:this.updateRunStep("vendors")}}skipStepHandler(t){t&&t.preventDefault(),this.errorMessage="",this.stepNumber++}updateRunStep(t){const e=["vendor","src","template","config"],n=e.indexOf(t);0===n&&(this.loading=!0,this.isUpdateStarted=!0,this.updatePercent=0),this.dataService.runAction(`admin/system_update/execute/${t}`).pipe((0,r.R)(this.destroyed$)).subscribe({next:t=>{this.updatePercent=(n+1)/e.length*100,100===this.updatePercent?(this.stepNumber=4,setTimeout(this.onUpdateComplete.bind(this),1e3)):this.updateRunStep(e[n+1])},error:t=>{t.error&&(this.errorMessage=t.error),this.loading=!1,this.isUpdateStarted=!1,this.updatePercent=0}})}closeModal(t){this.activeModal.close(t)}onUpdateComplete(){this.loading=!1,this.closeModal("completed")}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(p.Kz),d.Y36(Z.g),d.Y36(u.d))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-modal-file-upload"]],viewQuery:function(t,e){if(1&t&&d.Gf(A,5),2&t){let t;d.iGM(t=d.CRH())&&(e.filesWidget=t.first)}},decls:34,vars:42,consts:[[3,"ngClass"],[1,"modal-header","d-block"],[1,"modal-title","text-success"],[1,"icon-arrow-up-circle"],[1,"modal-body"],[1,"mb-3",3,"ngClass"],["class","icon-check-circle me-2 text-success",4,"ngIf","ngIfElse"],["iconCircleTemplate",""],["class","show-on-hover-parent",4,"ngIf"],[4,"ngIf"],["class","py-4",4,"ngIf"],["class","alert alert-dismissible alert-danger mt-3 mb-0",4,"ngIf"],[1,"modal-footer","d-block","pt-0"],["type","button",1,"btn","btn-primary","btn-wide",3,"disabled","click"],[1,"icon-arrow-right","ms-2"],["type","button",1,"btn","btn-secondary","btn-wide",3,"disabled","click"],[1,"icon-check-circle","me-2","text-success"],[1,"icon-circle","me-2"],[1,"show-on-hover-parent"],["fieldName","file",3,"hasPreviewImage","allowMultiple","allowedExtensions"],["filesWidget",""],[1,"pos-absolute-left-bottom10","show-on-hover"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"text-success","mb-2"],[1,"big"],[1,"ngb-accordion"],["id","accordion-settings-1",3,"title"],["ngbPanelContent",""],[1,"max-height400","mb-0"],[1,"py-4"],["type","info","textType","white",3,"striped","animated","value","showValue"],[1,"alert","alert-dismissible","alert-danger","mt-3","mb-0"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"]],template:function(t,e){if(1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"h4",2),d._UZ(3,"i",3),d._uU(4),d.ALo(5,"translate"),d.qZA(),d.qZA(),d.TgZ(6,"div",4),d.TgZ(7,"div"),d.TgZ(8,"div",5),d.YNc(9,E,1,0,"i",6),d._uU(10),d.ALo(11,"translate"),d.qZA(),d.TgZ(12,"div",5),d.YNc(13,h,1,0,"i",6),d._uU(14),d.ALo(15,"translate"),d.qZA(),d.TgZ(16,"div",5),d.YNc(17,_,1,0,"i",6),d._uU(18),d.ALo(19,"translate"),d.qZA(),d.YNc(20,N,1,0,"ng-template",null,7,d.W1O),d.qZA(),d.YNc(22,q,7,6,"div",8),d.YNc(23,m,15,11,"div",9),d.YNc(24,C,2,4,"div",10),d.YNc(25,U,4,3,"div",11),d.qZA(),d.TgZ(26,"div",12),d.TgZ(27,"button",13),d.NdJ("click",function(t){return e.nextStepHandler(t)}),d._uU(28),d.ALo(29,"translate"),d._UZ(30,"i",14),d.qZA(),d.TgZ(31,"button",15),d.NdJ("click",function(){return e.closeModal("close")}),d._uU(32),d.ALo(33,"translate"),d.qZA(),d.qZA(),d.qZA()),2&t){const t=d.MAs(21);d.Q6J("ngClass",d.VKq(34,x,e.loading)),d.xp6(4),d.hij(" ",d.lcZ(5,22,"SYSTEM_UPDATE")," "),d.xp6(4),d.Q6J("ngClass",d.VKq(36,I,1!=e.stepNumber)),d.xp6(1),d.Q6J("ngIf",e.stepNumber>1)("ngIfElse",t),d.xp6(1),d.hij(" ",d.lcZ(11,24,"SYSTEM_UPDATE_STEP1_DESCRIPTION")," "),d.xp6(2),d.Q6J("ngClass",d.VKq(38,I,2!=e.stepNumber)),d.xp6(1),d.Q6J("ngIf",e.stepNumber>2)("ngIfElse",t),d.xp6(1),d.hij(" ",d.lcZ(15,26,"SYSTEM_UPDATE_STEP2_DESCRIPTION")," "),d.xp6(2),d.Q6J("ngClass",d.VKq(40,I,3!=e.stepNumber)),d.xp6(1),d.Q6J("ngIf",e.stepNumber>3)("ngIfElse",t),d.xp6(1),d.hij(" ",d.lcZ(19,28,"SYSTEM_UPDATE_STEP3_DESCRIPTION")," "),d.xp6(4),d.Q6J("ngIf",1==e.stepNumber),d.xp6(1),d.Q6J("ngIf",3==e.stepNumber&&!e.isUpdateStarted),d.xp6(1),d.Q6J("ngIf",e.isUpdateStarted),d.xp6(1),d.Q6J("ngIf",e.errorMessage),d.xp6(2),d.Q6J("disabled",e.loading),d.xp6(1),d.hij(" ",d.lcZ(29,30,"CONTINUE")," "),d.xp6(3),d.Q6J("disabled",e.loading),d.xp6(1),d.hij(" ",d.lcZ(33,32,"CLOSE")," ")}},directives:[i.mk,i.O5,T.E,p.gY,p.Gk,p.gW,p.Ly],pipes:[S.X$],encapsulation:2}),t})();var M=n(51146),v=n(31041),R=n(61393);let G=(()=>{class t{transform(t,e){if(e&&Array.isArray(t)){const n=Object.keys(e);return t.filter(t=>n.reduce((n,i)=>n&&t[i].indexOf(e[i])>-1,!0))}return t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=d.Yjl({name:"filter",type:t,pure:!1}),t})();function L(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"tr"),d.TgZ(1,"td"),d.TgZ(2,"div",33),d.TgZ(3,"div",34),d.TgZ(4,"div",35),d.TgZ(5,"span",36),d._uU(6),d.qZA(),d.qZA(),d.qZA(),d.TgZ(7,"span"),d._uU(8),d.ALo(9,"translate"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"td",37),d.TgZ(11,"div",38),d.TgZ(12,"input",39,40),d.NdJ("ngModelChange",function(t){return e.$implicit.value=t}),d.qZA(),d.TgZ(14,"button",41,42),d.NdJ("click",function(e){return d.CHM(t),d.oxw().saveSettings("SETTINGS_MAIN",e)}),d.ALo(16,"translate"),d._UZ(17,"i",43),d.qZA(),d.TgZ(18,"button",44),d.NdJ("click",function(e){d.CHM(t);const n=d.MAs(13),i=d.MAs(15);return d.oxw().inputDisableToggle(n,i,e)}),d.ALo(19,"translate"),d._UZ(20,"i",45),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=e.$implicit,n=d.oxw();d.xp6(6),d.Oqu(t.name),d.xp6(2),d.Oqu(d.lcZ(9,6,t.name)),d.xp6(4),d.s9C("type",n.getFieldTypeByName(t.name)),d.Q6J("ngModel",t.value),d.xp6(2),d.s9C("ngbTooltip",d.lcZ(16,8,"SAVE")),d.xp6(4),d.s9C("ngbTooltip",d.lcZ(19,10,"EDIT"))}}function O(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"tr"),d.TgZ(1,"td"),d.TgZ(2,"input",56),d.NdJ("ngModelChange",function(t){return e.$implicit.name=t})("ngModelChange",function(){return d.CHM(t),d.oxw(2).onValueChanged("SETTINGS_ORDER_STATUSES")}),d.qZA(),d.qZA(),d.TgZ(3,"td"),d.TgZ(4,"input",56),d.NdJ("ngModelChange",function(t){return e.$implicit.options.template.value=t})("ngModelChange",function(){return d.CHM(t),d.oxw(2).onValueChanged("SETTINGS_ORDER_STATUSES")}),d.qZA(),d.qZA(),d.TgZ(5,"td",57),d.TgZ(6,"p-colorPicker",58),d.NdJ("ngModelChange",function(t){return e.$implicit.options.color.value=t})("ngModelChange",function(){return d.CHM(t),d.oxw(2).onValueChanged("SETTINGS_ORDER_STATUSES")}),d.qZA(),d.qZA(),d.TgZ(7,"td",57),d.TgZ(8,"button",59),d.NdJ("click",function(){const e=d.CHM(t).index;return d.oxw(2).deleteSetting("SETTINGS_ORDER_STATUSES",e)}),d.ALo(9,"translate"),d._UZ(10,"i",60),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=e.$implicit;d.xp6(2),d.Q6J("ngModel",t.name),d.xp6(2),d.Q6J("ngModel",t.options.template.value),d.xp6(2),d.Q6J("appendTo","body")("ngModel",t.options.color.value),d.xp6(2),d.s9C("ngbTooltip",d.lcZ(9,5,"DELETE"))}}function P(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",35),d.TgZ(1,"button",61),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).saveSettings("SETTINGS_ORDER_STATUSES")}),d._UZ(2,"i",43),d._uU(3," \xa0 "),d.TgZ(4,"span"),d._uU(5),d.ALo(6,"translate"),d.qZA(),d.qZA(),d._uU(7," \xa0 "),d.TgZ(8,"button",59),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).resetSettingsForm("SETTINGS_ORDER_STATUSES")}),d.ALo(9,"translate"),d._UZ(10,"i",62),d.qZA(),d.qZA()}2&t&&(d.xp6(5),d.Oqu(d.lcZ(6,2,"SAVE")),d.xp6(3),d.s9C("ngbTooltip",d.lcZ(9,4,"FORM_RESET")))}function w(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"div",46),d._uU(2),d.ALo(3,"translate"),d.qZA(),d.TgZ(4,"div",47),d.TgZ(5,"table",20),d.TgZ(6,"colgroup"),d._UZ(7,"col",48),d._UZ(8,"col",48),d._UZ(9,"col",49),d._UZ(10,"col",49),d.qZA(),d.TgZ(11,"thead"),d.TgZ(12,"tr"),d.TgZ(13,"th"),d._uU(14),d.ALo(15,"translate"),d.qZA(),d.TgZ(16,"th"),d._uU(17),d.ALo(18,"translate"),d.qZA(),d.TgZ(19,"th"),d._uU(20),d.ALo(21,"translate"),d.qZA(),d._UZ(22,"th"),d.qZA(),d.qZA(),d.TgZ(23,"tbody"),d.YNc(24,O,11,7,"tr",22),d.qZA(),d.TgZ(25,"tfoot"),d.TgZ(26,"tr",50),d.TgZ(27,"td",51),d.TgZ(28,"div",52),d.YNc(29,P,11,6,"div",53),d.qZA(),d.TgZ(30,"button",54),d.NdJ("click",function(){return d.CHM(t),d.oxw().addSetting("SETTINGS_ORDER_STATUSES")}),d._UZ(31,"i",55),d._uU(32," \xa0 "),d.TgZ(33,"span"),d._uU(34),d.ALo(35,"translate"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.ekj("loading",t.settings.SETTINGS_DELIVERY.loading),d.xp6(2),d.hij(" ",d.lcZ(3,9,"SETTINGS_STATUSES_DESCRIPTION")," "),d.xp6(12),d.hij(" ",d.lcZ(15,11,"NAME")," "),d.xp6(3),d.hij(" ",d.lcZ(18,13,"MAIL_TEMPLATE")," "),d.xp6(3),d.hij(" ",d.lcZ(21,15,"COLOR")," "),d.xp6(4),d.Q6J("ngForOf",t.settings.SETTINGS_ORDER_STATUSES.values),d.xp6(5),d.Q6J("ngIf",t.settings.SETTINGS_ORDER_STATUSES.changed),d.xp6(5),d.Oqu(d.lcZ(35,17,"ADD"))}}function k(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"tr"),d.TgZ(1,"td"),d.TgZ(2,"input",56),d.NdJ("ngModelChange",function(t){return e.$implicit.name=t})("ngModelChange",function(){return d.CHM(t),d.oxw(2).onValueChanged("SETTINGS_DELIVERY")}),d.qZA(),d.qZA(),d.TgZ(3,"td",57),d.TgZ(4,"input",63),d.NdJ("ngModelChange",function(t){return e.$implicit.options.price.value=t})("ngModelChange",function(){return d.CHM(t),d.oxw(2).onValueChanged("SETTINGS_DELIVERY")}),d.qZA(),d.qZA(),d.TgZ(5,"td",57),d.TgZ(6,"input",63),d.NdJ("ngModelChange",function(t){return e.$implicit.options.priceLimit.value=t})("ngModelChange",function(){return d.CHM(t),d.oxw(2).onValueChanged("SETTINGS_DELIVERY")}),d.qZA(),d.qZA(),d.TgZ(7,"td",57),d.TgZ(8,"button",59),d.NdJ("click",function(){const e=d.CHM(t).index;return d.oxw(2).deleteSetting("SETTINGS_DELIVERY",e)}),d.ALo(9,"translate"),d._UZ(10,"i",60),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=e.$implicit;d.xp6(2),d.Q6J("ngModel",t.name),d.xp6(2),d.Q6J("ngModel",t.options.price.value),d.xp6(2),d.Q6J("ngModel",t.options.priceLimit.value),d.xp6(2),d.s9C("ngbTooltip",d.lcZ(9,4,"DELETE"))}}function D(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",35),d.TgZ(1,"button",61),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).saveSettings("SETTINGS_DELIVERY")}),d._UZ(2,"i",43),d._uU(3," \xa0 "),d.TgZ(4,"span"),d._uU(5),d.ALo(6,"translate"),d.qZA(),d.qZA(),d._uU(7," \xa0 "),d.TgZ(8,"button",59),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).resetSettingsForm("SETTINGS_DELIVERY")}),d.ALo(9,"translate"),d._UZ(10,"i",62),d.qZA(),d.qZA()}2&t&&(d.xp6(5),d.Oqu(d.lcZ(6,2,"SAVE")),d.xp6(3),d.s9C("ngbTooltip",d.lcZ(9,4,"FORM_RESET")))}function y(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"div",46),d._uU(2),d.ALo(3,"translate"),d.qZA(),d.TgZ(4,"div",47),d.TgZ(5,"table",20),d.TgZ(6,"thead"),d.TgZ(7,"tr"),d.TgZ(8,"th"),d._uU(9),d.ALo(10,"translate"),d.qZA(),d.TgZ(11,"th"),d._uU(12),d.ALo(13,"translate"),d.qZA(),d.TgZ(14,"th"),d._uU(15),d.ALo(16,"translate"),d.qZA(),d._UZ(17,"th"),d.qZA(),d.qZA(),d.TgZ(18,"tbody"),d.YNc(19,k,11,6,"tr",22),d.qZA(),d.TgZ(20,"tfoot"),d.TgZ(21,"tr",50),d.TgZ(22,"td",51),d.TgZ(23,"div",52),d.YNc(24,D,11,6,"div",53),d.qZA(),d.TgZ(25,"button",54),d.NdJ("click",function(){return d.CHM(t),d.oxw().addSetting("SETTINGS_DELIVERY")}),d._UZ(26,"i",55),d._uU(27," \xa0 "),d.TgZ(28,"span"),d._uU(29),d.ALo(30,"translate"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.ekj("loading",t.settings.SETTINGS_DELIVERY.loading),d.xp6(2),d.hij(" ",d.lcZ(3,9,"SETTINGS_DELIVERY_DESCRIPTION")," "),d.xp6(7),d.hij(" ",d.lcZ(10,11,"NAME")," "),d.xp6(3),d.hij(" ",d.lcZ(13,13,"PRICE")," "),d.xp6(3),d.hij(" ",d.lcZ(16,15,"MAX_PRICE")," "),d.xp6(4),d.Q6J("ngForOf",t.settings.SETTINGS_DELIVERY.values),d.xp6(5),d.Q6J("ngIf",t.settings.SETTINGS_DELIVERY.changed),d.xp6(5),d.Oqu(d.lcZ(30,17,"ADD"))}}function J(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"tr"),d.TgZ(1,"td"),d.TgZ(2,"input",56),d.NdJ("ngModelChange",function(t){return e.$implicit.name=t})("ngModelChange",function(){return d.CHM(t),d.oxw(2).onValueChanged("SETTINGS_PAYMENT")}),d.qZA(),d.qZA(),d.TgZ(3,"td",57),d.TgZ(4,"input",56),d.NdJ("ngModelChange",function(t){return e.$implicit.options.value.value=t})("ngModelChange",function(){return d.CHM(t),d.oxw(2).onValueChanged("SETTINGS_PAYMENT")}),d.qZA(),d.qZA(),d.TgZ(5,"td",57),d.TgZ(6,"button",59),d.NdJ("click",function(){const e=d.CHM(t).index;return d.oxw(2).deleteSetting("SETTINGS_PAYMENT",e)}),d.ALo(7,"translate"),d._UZ(8,"i",60),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=e.$implicit;d.xp6(2),d.Q6J("ngModel",t.name),d.xp6(2),d.Q6J("ngModel",t.options.value.value),d.xp6(2),d.s9C("ngbTooltip",d.lcZ(7,3,"DELETE"))}}function Y(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",35),d.TgZ(1,"button",61),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).saveSettings("SETTINGS_PAYMENT")}),d._UZ(2,"i",43),d._uU(3," \xa0 "),d.TgZ(4,"span"),d._uU(5),d.ALo(6,"translate"),d.qZA(),d.qZA(),d._uU(7," \xa0 "),d.TgZ(8,"button",59),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).resetSettingsForm("SETTINGS_PAYMENT")}),d.ALo(9,"translate"),d._UZ(10,"i",62),d.qZA(),d.qZA()}2&t&&(d.xp6(5),d.Oqu(d.lcZ(6,2,"SAVE")),d.xp6(3),d.s9C("ngbTooltip",d.lcZ(9,4,"FORM_RESET")))}function V(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"div",46),d._uU(2),d.ALo(3,"translate"),d.qZA(),d.TgZ(4,"div",47),d.TgZ(5,"table",20),d.TgZ(6,"colgroup"),d._UZ(7,"col",64),d._UZ(8,"col",64),d._UZ(9,"col",49),d.qZA(),d.TgZ(10,"thead"),d.TgZ(11,"tr"),d.TgZ(12,"th"),d._uU(13),d.ALo(14,"translate"),d.qZA(),d.TgZ(15,"th"),d._uU(16),d.ALo(17,"translate"),d.qZA(),d._UZ(18,"th"),d.qZA(),d.qZA(),d.TgZ(19,"tbody"),d.YNc(20,J,9,5,"tr",22),d.qZA(),d.TgZ(21,"tfoot"),d.TgZ(22,"tr",50),d.TgZ(23,"td",51),d.TgZ(24,"div",52),d.YNc(25,Y,11,6,"div",53),d.qZA(),d.TgZ(26,"button",54),d.NdJ("click",function(){return d.CHM(t),d.oxw().addSetting("SETTINGS_PAYMENT")}),d._UZ(27,"i",55),d._uU(28," \xa0 "),d.TgZ(29,"span"),d._uU(30),d.ALo(31,"translate"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.ekj("loading",t.settings.SETTINGS_PAYMENT.loading),d.xp6(2),d.hij(" ",d.lcZ(3,8,"SETTINGS_PAYMENT_DESCRIPTION")," "),d.xp6(11),d.hij(" ",d.lcZ(14,10,"NAME")," "),d.xp6(3),d.hij(" ",d.lcZ(17,12,"VALUE")," "),d.xp6(4),d.Q6J("ngForOf",t.settings.SETTINGS_PAYMENT.values),d.xp6(5),d.Q6J("ngIf",t.settings.SETTINGS_PAYMENT.changed),d.xp6(5),d.Oqu(d.lcZ(31,14,"ADD"))}}function F(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"tr"),d.TgZ(1,"td"),d.TgZ(2,"input",56),d.NdJ("ngModelChange",function(t){return e.$implicit.name=t})("ngModelChange",function(){return d.CHM(t),d.oxw(2).onValueChanged("SETTINGS_CURRENCY")}),d.qZA(),d.qZA(),d.TgZ(3,"td",57),d.TgZ(4,"input",65),d.NdJ("ngModelChange",function(t){return e.$implicit.options.value.value=t})("ngModelChange",function(){return d.CHM(t),d.oxw(2).onValueChanged("SETTINGS_CURRENCY")}),d.qZA(),d.qZA(),d.TgZ(5,"td",57),d.TgZ(6,"button",59),d.NdJ("click",function(){const e=d.CHM(t).index;return d.oxw(2).deleteSetting("SETTINGS_CURRENCY",e)}),d.ALo(7,"translate"),d._UZ(8,"i",60),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=e.$implicit;d.xp6(2),d.Q6J("ngModel",t.name),d.xp6(2),d.Q6J("ngModel",t.options.value.value),d.xp6(2),d.s9C("ngbTooltip",d.lcZ(7,3,"REMOVE"))}}function Q(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",35),d.TgZ(1,"button",61),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).saveSettings("SETTINGS_CURRENCY")}),d._UZ(2,"i",43),d._uU(3," \xa0 "),d.TgZ(4,"span"),d._uU(5),d.ALo(6,"translate"),d.qZA(),d.qZA(),d._uU(7," \xa0 "),d.TgZ(8,"button",59),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).resetSettingsForm("SETTINGS_CURRENCY")}),d.ALo(9,"translate"),d._UZ(10,"i",62),d.qZA(),d.qZA()}2&t&&(d.xp6(5),d.Oqu(d.lcZ(6,2,"SAVE")),d.xp6(3),d.s9C("ngbTooltip",d.lcZ(9,4,"FORM_RESET")))}function H(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"div",46),d._uU(2),d.ALo(3,"translate"),d.qZA(),d.TgZ(4,"div",47),d.TgZ(5,"table",20),d.TgZ(6,"colgroup"),d._UZ(7,"col",64),d._UZ(8,"col",64),d._UZ(9,"col",49),d.qZA(),d.TgZ(10,"thead"),d.TgZ(11,"tr"),d.TgZ(12,"th"),d._uU(13),d.ALo(14,"translate"),d.qZA(),d.TgZ(15,"th"),d._uU(16),d.ALo(17,"translate"),d.qZA(),d._UZ(18,"th"),d.qZA(),d.qZA(),d.TgZ(19,"tbody"),d.YNc(20,F,9,5,"tr",22),d.qZA(),d.TgZ(21,"tfoot"),d.TgZ(22,"tr",50),d.TgZ(23,"td",51),d.TgZ(24,"div",52),d.YNc(25,Q,11,6,"div",53),d.qZA(),d.TgZ(26,"button",54),d.NdJ("click",function(){return d.CHM(t),d.oxw().addSetting("SETTINGS_CURRENCY")}),d._UZ(27,"i",55),d._uU(28," \xa0 "),d.TgZ(29,"span"),d._uU(30),d.ALo(31,"translate"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.ekj("loading",t.settings.SETTINGS_CURRENCY.loading),d.xp6(2),d.hij(" ",d.lcZ(3,8,"SETTINGS_CURRENCY_RATE_DESCRIPTION")," "),d.xp6(11),d.hij(" ",d.lcZ(14,10,"CURRENCY")," "),d.xp6(3),d.hij(" ",d.lcZ(17,12,"VALUE")," "),d.xp6(4),d.Q6J("ngForOf",t.settings.SETTINGS_CURRENCY.values),d.xp6(5),d.Q6J("ngIf",t.settings.SETTINGS_CURRENCY.changed),d.xp6(5),d.Oqu(d.lcZ(31,14,"ADD"))}}function j(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"tr"),d.TgZ(1,"td"),d.TgZ(2,"input",56),d.NdJ("ngModelChange",function(t){return e.$implicit.name=t})("ngModelChange",function(){return d.CHM(t),d.oxw(2).onValueChanged("SETTINGS_PROMOCODES")}),d.qZA(),d.qZA(),d.TgZ(3,"td",57),d.TgZ(4,"input",56),d.NdJ("ngModelChange",function(t){return e.$implicit.options.value.value=t})("ngModelChange",function(){return d.CHM(t),d.oxw(2).onValueChanged("SETTINGS_PROMOCODES")}),d.qZA(),d.qZA(),d.TgZ(5,"td",57),d.TgZ(6,"input",68),d.NdJ("ngModelChange",function(t){return e.$implicit.options.quantity.value=t})("ngModelChange",function(){return d.CHM(t),d.oxw(2).onValueChanged("SETTINGS_PROMOCODES")}),d.qZA(),d.qZA(),d.TgZ(7,"td",57),d.TgZ(8,"button",59),d.NdJ("click",function(){const e=d.CHM(t).index;return d.oxw(2).deleteSetting("SETTINGS_PROMOCODES",e)}),d.ALo(9,"translate"),d._UZ(10,"i",60),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=e.$implicit;d.xp6(2),d.Q6J("ngModel",t.name),d.xp6(2),d.Q6J("ngModel",t.options.value.value),d.xp6(2),d.Q6J("ngModel",t.options.quantity.value),d.xp6(2),d.s9C("ngbTooltip",d.lcZ(9,4,"REMOVE"))}}function $(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",35),d.TgZ(1,"button",61),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).saveSettings("SETTINGS_PROMOCODES")}),d._UZ(2,"i",43),d._uU(3," \xa0 "),d.TgZ(4,"span"),d._uU(5),d.ALo(6,"translate"),d.qZA(),d.qZA(),d._uU(7," \xa0 "),d.TgZ(8,"button",59),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).resetSettingsForm("SETTINGS_PROMOCODES")}),d.ALo(9,"translate"),d._UZ(10,"i",62),d.qZA(),d.qZA()}2&t&&(d.xp6(5),d.Oqu(d.lcZ(6,2,"SAVE")),d.xp6(3),d.s9C("ngbTooltip",d.lcZ(9,4,"FORM_RESET")))}function K(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"div",46),d._uU(2),d.ALo(3,"translate"),d.qZA(),d.TgZ(4,"div",47),d.TgZ(5,"table",20),d.TgZ(6,"colgroup"),d._UZ(7,"col",66),d._UZ(8,"col",66),d._UZ(9,"col",66),d._UZ(10,"col",49),d.qZA(),d.TgZ(11,"thead"),d.TgZ(12,"tr"),d.TgZ(13,"th"),d._uU(14),d.ALo(15,"translate"),d.qZA(),d.TgZ(16,"th"),d._uU(17),d.ALo(18,"translate"),d.qZA(),d.TgZ(19,"th"),d._uU(20),d.ALo(21,"translate"),d.qZA(),d._UZ(22,"th"),d.qZA(),d.qZA(),d.TgZ(23,"tbody"),d.YNc(24,j,11,6,"tr",22),d.qZA(),d.TgZ(25,"tfoot"),d.TgZ(26,"tr",50),d.TgZ(27,"td",67),d.TgZ(28,"div",52),d.YNc(29,$,11,6,"div",53),d.qZA(),d.TgZ(30,"button",54),d.NdJ("click",function(){return d.CHM(t),d.oxw().addSetting("SETTINGS_PROMOCODES")}),d._UZ(31,"i",55),d._uU(32," \xa0 "),d.TgZ(33,"span"),d._uU(34),d.ALo(35,"translate"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.ekj("loading",t.settings.SETTINGS_PROMOCODES.loading),d.xp6(2),d.hij(" ",d.lcZ(3,9,"SETTINGS_PROMOCODES_DESCRIPTION")," "),d.xp6(12),d.hij(" ",d.lcZ(15,11,"PROMO_CODE")," "),d.xp6(3),d.hij(" ",d.lcZ(18,13,"VALUE")," "),d.xp6(3),d.hij(" ",d.lcZ(21,15,"QUANTITY")," "),d.xp6(4),d.Q6J("ngForOf",t.settings.SETTINGS_PROMOCODES.values),d.xp6(5),d.Q6J("ngIf",t.settings.SETTINGS_PROMOCODES.changed),d.xp6(5),d.Oqu(d.lcZ(35,17,"ADD"))}}function W(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"tr"),d.TgZ(1,"td"),d.TgZ(2,"input",56),d.NdJ("ngModelChange",function(t){return e.$implicit.name=t})("ngModelChange",function(){return d.CHM(t),d.oxw(2).onValueChanged("SETTINGS_LANGUAGES")}),d.qZA(),d.qZA(),d.TgZ(3,"td",57),d.TgZ(4,"input",56),d.NdJ("ngModelChange",function(t){return e.$implicit.options.value.value=t})("ngModelChange",function(){return d.CHM(t),d.oxw(2).onValueChanged("SETTINGS_LANGUAGES")}),d.qZA(),d.qZA(),d.TgZ(5,"td",57),d.TgZ(6,"button",59),d.NdJ("click",function(){const e=d.CHM(t).index;return d.oxw(2).deleteSetting("SETTINGS_LANGUAGES",e)}),d.ALo(7,"translate"),d._UZ(8,"i",60),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=e.$implicit;d.xp6(2),d.Q6J("ngModel",t.name),d.xp6(2),d.Q6J("ngModel",t.options.value.value),d.xp6(2),d.s9C("ngbTooltip",d.lcZ(7,3,"DELETE"))}}function z(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",35),d.TgZ(1,"button",61),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).saveSettings("SETTINGS_LANGUAGES")}),d._UZ(2,"i",43),d._uU(3," \xa0 "),d.TgZ(4,"span"),d._uU(5),d.ALo(6,"translate"),d.qZA(),d.qZA(),d._uU(7," \xa0 "),d.TgZ(8,"button",59),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).resetSettingsForm("SETTINGS_LANGUAGES")}),d.ALo(9,"translate"),d._UZ(10,"i",62),d.qZA(),d.qZA()}2&t&&(d.xp6(5),d.Oqu(d.lcZ(6,2,"SAVE")),d.xp6(3),d.s9C("ngbTooltip",d.lcZ(9,4,"FORM_RESET")))}function X(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"div",46),d._uU(2),d.ALo(3,"translate"),d.qZA(),d.TgZ(4,"div",47),d.TgZ(5,"table",20),d.TgZ(6,"colgroup"),d._UZ(7,"col",64),d._UZ(8,"col",64),d._UZ(9,"col",49),d.qZA(),d.TgZ(10,"thead"),d.TgZ(11,"tr"),d.TgZ(12,"th"),d._uU(13),d.ALo(14,"translate"),d.qZA(),d.TgZ(15,"th"),d._uU(16),d.ALo(17,"translate"),d.qZA(),d._UZ(18,"th"),d.qZA(),d.qZA(),d.TgZ(19,"tbody"),d.YNc(20,W,9,5,"tr",22),d.qZA(),d.TgZ(21,"tfoot"),d.TgZ(22,"tr",50),d.TgZ(23,"td",51),d.TgZ(24,"div",52),d.YNc(25,z,11,6,"div",53),d.qZA(),d.TgZ(26,"button",54),d.NdJ("click",function(){return d.CHM(t),d.oxw().addSetting("SETTINGS_LANGUAGES")}),d._UZ(27,"i",55),d._uU(28," \xa0 "),d.TgZ(29,"span"),d._uU(30),d.ALo(31,"translate"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.ekj("loading",t.settings.SETTINGS_LANGUAGES.loading),d.xp6(2),d.hij(" ",d.lcZ(3,8,"SETTINGS_LANGUAGES_DESCRIPTION")," "),d.xp6(11),d.hij(" ",d.lcZ(14,10,"LANGUAGE")," "),d.xp6(3),d.hij(" ",d.lcZ(17,12,"LOCALE")," "),d.xp6(4),d.Q6J("ngForOf",t.settings.SETTINGS_LANGUAGES.values),d.xp6(5),d.Q6J("ngIf",t.settings.SETTINGS_LANGUAGES.changed),d.xp6(5),d.Oqu(d.lcZ(31,14,"ADD"))}}function B(t,e){1&t&&(d.TgZ(0,"div",79),d._uU(1),d.ALo(2,"translate"),d.qZA()),2&t&&(d.xp6(1),d.hij(" ",d.lcZ(2,1,"NOTHING_FOUND"),". "))}function tt(t,e){if(1&t&&(d.TgZ(0,"tr"),d.TgZ(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td",57),d._uU(4),d.qZA(),d.qZA()),2&t){const t=e.$implicit;d.xp6(2),d.Oqu(t.name),d.xp6(2),d.Oqu(t.version)}}const et=function(t){return{name:t}};function nt(t,e){if(1&t&&(d.TgZ(0,"div",80),d.TgZ(1,"div",47),d.TgZ(2,"table",20),d.TgZ(3,"colgroup"),d._UZ(4,"col",81),d._UZ(5,"col",48),d.qZA(),d.TgZ(6,"thead"),d.TgZ(7,"tr"),d.TgZ(8,"th"),d._uU(9),d.ALo(10,"translate"),d.qZA(),d.TgZ(11,"th"),d._uU(12),d.ALo(13,"translate"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(14,"tbody"),d.YNc(15,tt,5,2,"tr",22),d.ALo(16,"filter"),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t){const t=d.oxw(2);d.xp6(9),d.hij(" ",d.lcZ(10,3,"NAME")," "),d.xp6(3),d.hij(" ",d.lcZ(13,5,"VERSION")," "),d.xp6(3),d.Q6J("ngForOf",d.xi3(16,7,t.composerPackages,d.VKq(10,et,t.composerPackageNameFilter)))}}const it=function(t){return{loading:t}},st=function(t){return{"form-control-search-clear":t}};function ot(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",69),d.TgZ(1,"div",70),d.TgZ(2,"button",71),d.NdJ("click",function(e){return d.CHM(t),d.oxw().modalSystemUpdate(e)}),d._UZ(3,"i",72),d._uU(4),d.ALo(5,"translate"),d.qZA(),d.qZA(),d.TgZ(6,"div",73),d._uU(7),d.ALo(8,"translate"),d.qZA(),d.TgZ(9,"div",74),d.TgZ(10,"input",75),d.NdJ("ngModelChange",function(e){return d.CHM(t),d.oxw().composerPackageNameFilter=e}),d.ALo(11,"translate"),d.qZA(),d.TgZ(12,"span",76),d.NdJ("click",function(){return d.CHM(t),d.oxw().composerPackageNameFilter=""}),d.qZA(),d.qZA(),d.YNc(13,B,3,3,"div",77),d.ALo(14,"filter"),d.YNc(15,nt,17,12,"ng-template",null,78,d.W1O),d.qZA()}if(2&t){const t=d.MAs(16),e=d.oxw();d.Q6J("ngClass",d.VKq(17,it,e.settings.SETTINGS_COMPOSER_PACKAGES.loading)),d.xp6(4),d.hij(" ",d.lcZ(5,8,"SYSTEM_UPDATE")," "),d.xp6(3),d.hij(" ",d.lcZ(8,10,"SETTINGS_COMPOSER_PACKAGES_DESCRIPTION")," "),d.xp6(2),d.Q6J("ngClass",d.VKq(19,st,!!e.composerPackageNameFilter)),d.xp6(1),d.MGl("placeholder","",d.lcZ(11,12,"SEARCH"),"..."),d.Q6J("ngModel",e.composerPackageNameFilter),d.xp6(3),d.Q6J("ngIf",0===d.xi3(14,14,e.composerPackages,d.VKq(21,et,e.composerPackageNameFilter)).length)("ngIfElse",t)}}const at=[{path:"",component:(()=>{class t{constructor(t,e,n,i,s){this.messageService=t,this.settingsService=e,this.appSettings=n,this.modalService=i,this.translateService=s,this.loading=!1,this.forms={},this.composerPackages=[],this.composerPackageName="",this.composerPackageVersion="",this.composerPackageNameFilter="",this.settings={SETTINGS_MAIN:new c.e(!1,!0,[],null),SETTINGS_ORDER_STATUSES:new c.e(!1,!0,[],{template:{value:"userEmailStatus",type:"text"},color:{value:"#00aeff",type:"text"}}),SETTINGS_DELIVERY:new c.e(!1,!0,[],{price:{value:0,type:"number"},priceLimit:{value:0,type:"number"}}),SETTINGS_PROMOCODES:new c.e(!1,!0,[],{value:{value:"",type:"text"},quantity:{value:0,type:"number"}}),SETTINGS_PAYMENT:new c.e(!1,!0,[],{value:{value:"",type:"text"}}),SETTINGS_CURRENCY:new c.e(!1,!0,[],{value:{value:1,type:"number"}}),SETTINGS_LANGUAGES:new c.e(!1,!0,[],{value:{value:"",type:"text"}}),SETTINGS_COMPOSER_PACKAGES:new c.e(!1,!0,[],null)},this.destroyed$=new a.xQ,this.baseUrl=this.appSettings.settings.webApiUrl+"/"}ngOnInit(){this.getSettings(),this.getComposerPackages()}getSettings(){this.settingsService.getList().pipe((0,r.R)(this.destroyed$)).subscribe(t=>{t.SETTINGS_MAIN&&(this.settings.SETTINGS_MAIN.values=t.SETTINGS_MAIN,this.settings.SETTINGS_MAIN.defaultValues=(0,l.cloneDeep)(t.SETTINGS_MAIN),this.settings.SETTINGS_MAIN.loading=!1),t.SETTINGS_ORDER_STATUSES&&(this.settings.SETTINGS_ORDER_STATUSES.values=t.SETTINGS_ORDER_STATUSES,this.settings.SETTINGS_ORDER_STATUSES.defaultValues=(0,l.cloneDeep)(t.SETTINGS_ORDER_STATUSES),this.settings.SETTINGS_ORDER_STATUSES.loading=!1),t.SETTINGS_DELIVERY&&(this.settings.SETTINGS_DELIVERY.values=t.SETTINGS_DELIVERY,this.settings.SETTINGS_DELIVERY.defaultValues=(0,l.cloneDeep)(t.SETTINGS_DELIVERY),this.settings.SETTINGS_DELIVERY.loading=!1),t.SETTINGS_PAYMENT&&(this.settings.SETTINGS_PAYMENT.values=t.SETTINGS_PAYMENT,this.settings.SETTINGS_PAYMENT.defaultValues=(0,l.cloneDeep)(t.SETTINGS_PAYMENT),this.settings.SETTINGS_PAYMENT.loading=!1),t.SETTINGS_CURRENCY&&(this.settings.SETTINGS_CURRENCY.values=t.SETTINGS_CURRENCY,this.settings.SETTINGS_CURRENCY.defaultValues=(0,l.cloneDeep)(t.SETTINGS_CURRENCY),this.settings.SETTINGS_CURRENCY.loading=!1),t.SETTINGS_PROMOCODES&&(this.settings.SETTINGS_PROMOCODES.values=t.SETTINGS_PROMOCODES,this.settings.SETTINGS_PROMOCODES.defaultValues=(0,l.cloneDeep)(t.SETTINGS_PROMOCODES),this.settings.SETTINGS_PROMOCODES.loading=!1),t.SETTINGS_LANGUAGES&&(this.settings.SETTINGS_LANGUAGES.values=t.SETTINGS_LANGUAGES,this.settings.SETTINGS_LANGUAGES.defaultValues=(0,l.cloneDeep)(t.SETTINGS_LANGUAGES),this.settings.SETTINGS_LANGUAGES.loading=!1)})}addSetting(t){const e={name:"",description:"",options:(0,l.cloneDeep)(this.settings[t].defaultOptions)};this.settings[t].values.push(e)}deleteSetting(t,e){this.settings[t].values.splice(e,1),this.settings[t].changed=!0}saveSettings(t,e){e&&e.preventDefault();const n=this.settings[t].values;this.settings[t].loading=!0,this.settingsService.updateGroup(t,n).pipe((0,r.R)(this.destroyed$)).subscribe({next:e=>{this.messageService.add({key:"message",severity:"success",summary:this.getLangString("MESSAGE"),detail:this.getLangString("DATA_SAVED_SUCCESSFULLY")}),this.settings[t].defaultValues=e,this.settings[t].loading=!1,this.settings[t].changed=!1,this.pageReload()},error:e=>{e.error&&this.messageService.add({key:"message",severity:"error",summary:this.getLangString("ERROR"),detail:e.error}),this.settings[t].loading=!1}})}getFieldTypeByName(t){return t.toLowerCase().indexOf("password")>-1?"password":"text"}getCurrentLocale(){const t=(0,l.findIndex)(this.settings.SETTINGS_MAIN.values,{name:"locale"});return t>-1?String(this.settings.SETTINGS_MAIN.values[t].value):""}getLangString(t){return this.translateService.store.translations[this.translateService.currentLang]&&this.translateService.store.translations[this.translateService.currentLang][t]||t}resetSettingsForm(t){const e=this.settings[t].defaultValues.length;e<this.settings[t].values.length&&this.settings[t].values.splice(e-1,this.settings[t].values.length-e),(0,l.extend)(this.settings[t].values,(0,l.cloneDeepWith)(this.settings[t].defaultValues)),this.settings[t].loading=!1,this.settings[t].changed=!1}getActionSuccessMessage(t){let e="";switch(t){case"clear_cache":e=this.getLangString("CACHE_CLEAR_SUCCESSFULLY");break;case"clear_system_cache":e=this.getLangString("CACHE_SYSTEM_CLEAR_SUCCESSFULLY");break;case"update_filters":e=this.getLangString("UPDATE_FILTERS_SUCCESSFULLY")}return e}runActionPost(t){this.loading=!0,this.settingsService.runActionPost(t).pipe((0,r.R)(this.destroyed$)).subscribe({next:e=>{if(this.loading=!1,["update_internationalization"].indexOf(t)>-1)this.pageReload();else if(e&&e.success){const e=this.getActionSuccessMessage(t);e&&this.messageService.add({key:"message",severity:"success",summary:this.getLangString("MESSAGE"),detail:e})}},error:t=>{t.error&&this.messageService.add({key:"message",severity:"error",summary:this.getLangString("ERROR"),detail:t.error}),this.loading=!1}})}getComposerPackages(){this.settings.SETTINGS_COMPOSER_PACKAGES.loading=!0,this.settingsService.getComposerPackagesList().pipe((0,r.R)(this.destroyed$)).subscribe({next:t=>{this.composerPackages=t,this.settings.SETTINGS_COMPOSER_PACKAGES.loading=!1},error:t=>{this.settings.SETTINGS_COMPOSER_PACKAGES.loading=!1}})}requirePackage(t){t&&t.preventDefault(),this.composerPackageName&&(this.settings.SETTINGS_COMPOSER_PACKAGES.loading=!0,this.settingsService.composerRequirePackage(this.composerPackageName,this.composerPackageVersion).pipe((0,r.R)(this.destroyed$)).subscribe({next:t=>{this.composerPackageName="",this.composerPackageVersion="",this.settings.SETTINGS_COMPOSER_PACKAGES.loading=!1},error:t=>{t.error&&this.messageService.add({key:"message",severity:"error",summary:this.getLangString("ERROR"),detail:t.error}),this.settings.SETTINGS_COMPOSER_PACKAGES.loading=!1}}))}modalSystemUpdate(t){t&&t.preventDefault(),this.modalRef&&(this.modalRef.dismiss(),this.modalRef=null),this.modalRef=this.modalService.open(b,{backdrop:"static",keyboard:!1}),this.modalRef.result.then(t=>{"completed"===t&&(this.messageService.add({key:"message",severity:"success",summary:this.getLangString("MESSAGE"),detail:this.getLangString("SYSTEM_UPDATE_COMPLETED")}),setTimeout(this.pageReload.bind(this),2e3))})}onValueChanged(t){this.settings[t].changed=!0}inputDisableToggle(t,e,n){n&&n.preventDefault(),t.readOnly=!t.readOnly,e&&(e.style.display="none"!==e.style.display?"none":"")}pageReload(){window.location.reload()}}return t.title="SETTINGS",t.\u0275fac=function(e){return new(e||t)(d.Y36(g.ez),d.Y36(Z.g),d.Y36(u.d),d.Y36(p.FF),d.Y36(S.sK))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-settings"]],features:[d._Bn([g.ez])],decls:80,vars:54,consts:[[1,"card"],[1,"card-body"],[1,"float-md-start"],[1,"icon-cog"],[1,"float-md-end"],["ngbDropdown","","placement","bottom-right",1,"d-block","d-md-inline-block"],["ngbDropdownToggle","",1,"btn","btn-info","btn-sm","d-block","d-md-inline-block","width-100","width-md-auto","mb-2","mb-md-0"],[1,"icon-repeat"],["ngbDropdownMenu","",1,"dropdown-menu-right"],[1,"dropdown-item",3,"click"],[1,"icon-reload","text-info"],[1,"icon-repeat","text-info"],[1,"icon-globe","text-info"],[1,"icon-tag","text-info"],[1,"clearfix"],[1,"row"],[1,"col-md-6"],[1,"label-filled"],[1,"card","mb-4"],[1,"table-responsive-"],[1,"table","table-divided","mb-0"],["width","50%"],[4,"ngFor","ngForOf"],["activeIds","accordion-settings-1",1,"ngb-accordion",3,"closeOthers"],["id","accordion-settings-1",3,"title"],["ngbPanelContent",""],["id","accordion-settings-2",3,"title"],["id","accordion-settings-3",3,"title"],["id","accordion-settings-4",3,"title"],["id","accordion-settings-7",3,"title"],["id","accordion-settings-5",3,"title"],["id","accordion-settings-6",3,"title"],["key","message","position","bottom-right"],[1,"show-on-hover-parent"],[1,"show-on-hover-child","position-relative"],[1,"pos-absolute-right"],[1,"badge","bg-secondary"],[1,"border-bottom-0"],[1,"input-group","input-group-sm","input-group-on-hover"],["readonly","",1,"form-control",3,"type","ngModel","ngModelChange"],["inputField",""],["type","button",1,"btn","btn-sm","btn-outline-success",2,"display","none",3,"ngbTooltip","click"],["button",""],[1,"icon-check"],["type","button",1,"btn","btn-sm","btn-outline-secondary",3,"ngbTooltip","click"],[1,"icon-edit"],[1,"text-muted"],[1,"table-responsive"],["width","40%"],["width","10%"],[1,"bg-faded"],["colspan","4",1,"text-center","border-bottom-0"],[1,"relative"],["class","pos-absolute-right",4,"ngIf"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"icon-plus"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"text-center"],[3,"appendTo","ngModel","ngModelChange"],["type","button",1,"btn","btn-secondary","btn-sm",3,"ngbTooltip","click"],[1,"icon-cross"],["type","button",1,"btn","btn-info","btn-sm",3,"click"],[1,"icon-reload"],["type","number","step","1","min","0",1,"form-control","form-control-sm","mwidth-80","m-auto",3,"ngModel","ngModelChange"],["width","45%"],["type","number","step","1","min","0",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["width","30%"],["colspan","5",1,"text-center","border-bottom-0"],["type","number",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"ngClass"],[1,"float-end"],["type","button",1,"btn","btn-sm","btn-success",3,"click"],[1,"icon-arrow-up-circle"],[1,"pb-3","text-muted","mb-2"],[1,"form-control-search","mb-3",3,"ngClass"],["type","text",1,"form-control","form-control-sm",3,"placeholder","ngModel","ngModelChange"],[3,"click"],["class","alert alert-info py-1 px-3",4,"ngIf","ngIfElse"],["composerPackagesTable",""],[1,"alert","alert-info","py-1","px-3"],[1,"max-height400"],["width","60%"]],template:function(t,e){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"h3"),d._UZ(4,"i",3),d._uU(5),d.ALo(6,"translate"),d.qZA(),d.qZA(),d.TgZ(7,"div",4),d.TgZ(8,"div",5),d.TgZ(9,"button",6),d._UZ(10,"i",7),d._uU(11," \xa0 "),d.TgZ(12,"span"),d._uU(13),d.ALo(14,"translate"),d.qZA(),d.qZA(),d.TgZ(15,"div",8),d.TgZ(16,"button",9),d.NdJ("click",function(){return e.runActionPost("clear_cache")}),d._UZ(17,"i",10),d._uU(18),d.ALo(19,"translate"),d.qZA(),d.TgZ(20,"button",9),d.NdJ("click",function(){return e.runActionPost("clear_system_cache")}),d._UZ(21,"i",11),d._uU(22),d.ALo(23,"translate"),d.qZA(),d.TgZ(24,"button",9),d.NdJ("click",function(){return e.runActionPost("update_internationalization")}),d._UZ(25,"i",12),d._uU(26),d.ALo(27,"translate"),d.qZA(),d.TgZ(28,"button",9),d.NdJ("click",function(){return e.runActionPost("update_filters")}),d._UZ(29,"i",13),d._uU(30),d.ALo(31,"translate"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d._UZ(32,"div",14),d._UZ(33,"hr"),d.TgZ(34,"div",15),d.TgZ(35,"div",16),d.TgZ(36,"div"),d.TgZ(37,"label",17),d._uU(38),d.ALo(39,"translate"),d.qZA(),d.TgZ(40,"div",18),d.TgZ(41,"div",19),d.TgZ(42,"table",20),d.TgZ(43,"colgroup"),d._UZ(44,"col",21),d._UZ(45,"col",21),d.qZA(),d.TgZ(46,"thead"),d.TgZ(47,"tr"),d.TgZ(48,"th"),d._uU(49),d.ALo(50,"translate"),d.qZA(),d.TgZ(51,"th"),d._uU(52),d.ALo(53,"translate"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(54,"tbody"),d.YNc(55,L,21,12,"tr",22),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(56,"div",16),d.TgZ(57,"ngb-accordion",23),d.TgZ(58,"ngb-panel",24),d.ALo(59,"translate"),d.YNc(60,w,36,19,"ng-template",25),d.qZA(),d.TgZ(61,"ngb-panel",26),d.ALo(62,"translate"),d.YNc(63,y,31,19,"ng-template",25),d.qZA(),d.TgZ(64,"ngb-panel",27),d.ALo(65,"translate"),d.YNc(66,V,32,16,"ng-template",25),d.qZA(),d.TgZ(67,"ngb-panel",28),d.ALo(68,"translate"),d.YNc(69,H,32,16,"ng-template",25),d.qZA(),d.TgZ(70,"ngb-panel",29),d.ALo(71,"translate"),d.YNc(72,K,36,19,"ng-template",25),d.qZA(),d.TgZ(73,"ngb-panel",30),d.ALo(74,"translate"),d.YNc(75,X,32,16,"ng-template",25),d.qZA(),d.TgZ(76,"ngb-panel",31),d.ALo(77,"translate"),d.YNc(78,ot,17,23,"ng-template",25),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d._UZ(79,"p-toast",32)),2&t&&(d.xp6(1),d.ekj("loading",e.loading),d.xp6(4),d.hij(" ",d.lcZ(6,22,"SETTINGS")," "),d.xp6(8),d.Oqu(d.lcZ(14,24,"CLEAR_CACHE")),d.xp6(5),d.hij(" \xa0 ",d.lcZ(19,26,"CLEAR_FILE_CACHE")," "),d.xp6(4),d.hij(" \xa0 ",d.lcZ(23,28,"CLEAR_SYSTEM_CACHE")," "),d.xp6(4),d.hij(" \xa0 ",d.lcZ(27,30,"UPDATE_DICTIONARIES")," "),d.xp6(4),d.hij(" \xa0 ",d.lcZ(31,32,"UPDATE_FILTERS")," "),d.xp6(6),d.ekj("loading",e.settings.SETTINGS_MAIN.loading),d.xp6(2),d.Oqu(d.lcZ(39,34,"SETTINGS_MAIN")),d.xp6(11),d.Oqu(d.lcZ(50,36,"PARAMETER")),d.xp6(3),d.Oqu(d.lcZ(53,38,"VALUE")),d.xp6(3),d.Q6J("ngForOf",e.settings.SETTINGS_MAIN.values),d.xp6(2),d.Q6J("closeOthers",!0),d.xp6(1),d.Q6J("title",d.lcZ(59,40,"SETTINGS_ORDER_STATUSES")),d.xp6(3),d.Q6J("title",d.lcZ(62,42,"SETTINGS_DELIVERY")),d.xp6(3),d.Q6J("title",d.lcZ(65,44,"SETTINGS_PAYMENT")),d.xp6(3),d.Q6J("title",d.lcZ(68,46,"SETTINGS_CURRENCY")),d.xp6(3),d.Q6J("title",d.lcZ(71,48,"SETTINGS_PROMOCODES")),d.xp6(3),d.Q6J("title",d.lcZ(74,50,"SETTINGS_LANGUAGES")),d.xp6(3),d.Q6J("title",d.lcZ(77,52,"SETTINGS_COMPOSER_PACKAGES")))},directives:[p.jt,p.iD,p.Vi,i.sg,p.gY,p.Gk,p.gW,M.FN,v.Fj,v.JJ,v.On,p._L,i.O5,R.zH,v.qQ,v.wV,i.mk],pipes:[S.X$,G],encapsulation:2}),t})()}];let rt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[o.Bz.forChild(at)],o.Bz]}),t})(),lt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({providers:[],imports:[[i.ez,s.m,rt]]}),t})()},89223:function(t,e,n){"use strict";n.d(e,{g:function(){return l}});var i=n(42693),s=n(40878),o=n(47727),a=(n(11026),n(93724)),r=n(35366);let l=(()=>{class t{constructor(t){this.http=t,this.headers=new i.WM({"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}),this.requestUrl="",this.baseUrl="",this.requestUrl="/admin/settings",this.baseUrl=a.d.getBaseUrl()}setRequestUrl(t){this.requestUrl=t}getRequestUrl(){return this.requestUrl}getList(){return this.http.get(this.getRequestUrl()).pipe((0,o.K)(this.handleError()))}clearSystemCache(){const t=this.getRequestUrl()+"/clear_system_cache";return this.http.post(t,{},{headers:this.headers}).pipe((0,o.K)(this.handleError()))}runActionPost(t){const e=this.getRequestUrl()+`/${t}`;return this.http.post(e,{},{headers:this.headers}).pipe((0,o.K)(this.handleError()))}updateGroup(t,e){const n=this.getRequestUrl()+`/${t}`;return this.http.put(n,e,{headers:this.headers}).pipe((0,o.K)(this.handleError()))}getComposerPackagesList(){return this.http.get(this.getRequestUrl()+"_composer_installed_packages").pipe((0,o.K)(this.handleError()))}composerRequirePackage(t,e){const n=this.getRequestUrl()+"_composer_require_package";return this.http.post(n,{packageName:t,packageVersion:e},{headers:this.headers}).pipe((0,o.K)(this.handleError()))}postFormData(t,e){const n=new i.WM({enctype:"multipart/form-data",Accept:"application/json","X-Requested-With":"XMLHttpRequest"});return this.http.post(this.baseUrl+e,t,{headers:n}).pipe((0,o.K)(this.handleError()))}runAction(t){return this.http.post(this.baseUrl+t,{},{headers:this.headers}).pipe((0,o.K)(this.handleError()))}handleError(t="operation",e){return t=>{if(!(t.status&&[401,403].indexOf(t.status)>-1)){if(t.error)throw t.error;return(0,s.of)(e)}window.location.href=this.baseUrl+"/login"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(i.eN))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);