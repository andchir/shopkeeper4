!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"9i+i":function(e,a,i){"use strict";i.r(a),i.d(a,"StatisticsModule",function(){return I});var r,o,s,c,l=i("SVse"),u=i("d2mR"),h=i("iInd"),g=i("IheW"),d=i("LRne"),b=i("JIr8"),p=i("8Y7J"),f=((r=function(){function e(n){t(this,e),this.http=n,this.headers=new g.e({"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}),this.requestUrl="/admin/statistics",this.chartLineOptions={responsive:!0,maintainAspectRatio:!1}}return n(e,[{key:"setRequestUrl",value:function(t){this.requestUrl=t}},{key:"getRequestUrl",value:function(){return this.requestUrl}},{key:"getParams",value:function(t){var e=new g.f;for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&(e=e.append(n,t[n]));return e}},{key:"getStatisticsOrders",value:function(t,e){var n=this.getParams(e),a=this.getRequestUrl()+"/orders";return this.http.get(a,{params:n,headers:this.headers}).pipe(Object(b.a)(this.handleError()))}},{key:"handleError",value:function(){var t=arguments.length>1?arguments[1]:void 0;return function(e){if(e.error)throw e.error;return Object(d.a)(t)}}}]),e}()).\u0275fac=function(t){return new(t||r)(p.Zb(g.a))},r.\u0275prov=p.Ib({token:r,factory:r.\u0275fac}),r),v=i("keWK"),y=i("wgQU"),S=i("7vha"),m=i("s7LF"),R=i("G0yt"),w=i("pV6I"),D=i("TSSN"),k=[{path:"",component:(o=function(){function e(n,a){t(this,e),this.dataService=n,this.appSettings=a,this.type="year",this.loading=!1,this.calendarLocale=v.b,this.rangeDates=[new Date,new Date],this.rangeDates[0].setMonth(this.rangeDates[1].getMonth()-1),this.locale=this.appSettings.settings.locale,this.yearRangeString=[this.rangeDates[1].getFullYear()-5,this.rangeDates[1].getFullYear()].join(":")}return n(e,[{key:"ngOnInit",value:function(){this.getData()}},{key:"getData",value:function(){var t=this;this.rangeDates[0]&&this.rangeDates[1]&&(this.loading=!0,this.dataService.getStatisticsOrders(this.type,{dateFrom:this.getDateString(this.rangeDates[0]),dateTo:this.getDateString(this.rangeDates[1])}).subscribe(function(e){t.data=e,t.loading=!1},function(e){t.loading=!1}))}},{key:"getDateString",value:function(t){var e=String(t.getFullYear());return e+="-"+("0"+(t.getMonth()+1)).slice(-2),e+="-"+("0"+t.getDate()).slice(-2)}}]),e}(),o.title="STATISTICS",o.\u0275fac=function(t){return new(t||o)(p.Mb(f),p.Mb(y.a))},o.\u0275cmp=p.Gb({type:o,selectors:[["app-statistics"]],features:[p.zb([f])],decls:17,vars:19,consts:[[1,"card"],[1,"card-body"],[1,"icon-bar-graph-2"],[1,"min-height400"],[1,"d-inline-block","mr-2"],[3,"ngModel","selectionMode","showIcon","monthNavigator","yearNavigator","yearRange","dateFormat","locale","ngModelChange","onSelect"],["type","button",1,"btn","btn-secondary","ml-md-2",3,"ngbTooltip","click"],[1,"icon-reload"],["type","line",3,"data","height","responsive"]],template:function(t,e){1&t&&(p.Sb(0,"div",0),p.Sb(1,"div",1),p.Sb(2,"h3"),p.Nb(3,"i",2),p.Hc(4),p.fc(5,"translate"),p.Rb(),p.Nb(6,"hr"),p.Sb(7,"div",3),p.Sb(8,"div"),p.Sb(9,"div",4),p.Sb(10,"p-calendar",5),p.cc("ngModelChange",function(t){return e.rangeDates=t})("onSelect",function(){return e.getData()}),p.Rb(),p.Rb(),p.Sb(11,"button",6),p.cc("click",function(){return e.getData()}),p.fc(12,"translate"),p.Nb(13,"i",7),p.Rb(),p.Rb(),p.Nb(14,"hr"),p.Sb(15,"div"),p.Nb(16,"p-chart",8),p.Rb(),p.Rb(),p.Rb(),p.Rb()),2&t&&(p.Ab(4),p.Jc(" ",p.gc(5,15,"STATISTICS")," "),p.Ab(3),p.Eb("loading",e.loading),p.Ab(3),p.lc("ngModel",e.rangeDates)("selectionMode","range")("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.yearRangeString)("dateFormat",e.calendarLocale[e.locale].format)("locale",e.calendarLocale[e.locale]),p.Ab(1),p.mc("ngbTooltip",p.gc(12,17,"REFRESH")),p.Ab(5),p.lc("data",e.data)("height","400px")("responsive",!0))},directives:[S.a,m.n,m.p,R.v,w.b],pipes:[D.c],styles:[""]}),o)}],M=((c=function e(){t(this,e)}).\u0275mod=p.Kb({type:c}),c.\u0275inj=p.Jb({factory:function(t){return new(t||c)},imports:[[h.f.forChild(k)],h.f]}),c),I=((s=function e(){t(this,e)}).\u0275mod=p.Kb({type:s}),s.\u0275inj=p.Jb({factory:function(t){return new(t||s)},imports:[[l.c,u.a,M]]}),s)}}])}();