!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var c=e[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}function n(t,n,c){return n&&e(t.prototype,n),c&&e(t,c),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"7wo0":function(e,c,i){"use strict";i.r(c),i.d(c,"SettingsModule",function(){return gt});var a=i("SVse"),b=i("d2mR"),r=i("iInd"),o=i("XNiG"),s=i("1G5W"),l=i("LvDl"),S=i("hhfa"),u=i("8Eda"),T=i("wgQU"),d=i("b1TM"),g=i("c863"),E=i("8Y7J"),p=i("G0yt"),h=i("TSSN"),f=["filesWidget"];function v(t,e){1&t&&E.Ob(0,"i",16)}function m(t,e){1&t&&E.Ob(0,"i",16)}function I(t,e){1&t&&E.Ob(0,"i",16)}function G(t,e){1&t&&E.Ob(0,"i",17)}function N(t,e){if(1&t){var n=E.Ub();E.Tb(0,"div",18),E.Ob(1,"app-file-widget",19,20),E.Tb(3,"div",21),E.Tb(4,"button",22),E.dc("click",function(t){return E.yc(n),E.fc().skipStepHandler(t)}),E.Gc(5),E.gc(6,"translate"),E.Sb(),E.Sb(),E.Sb()}2&t&&(E.Bb(1),E.mc("hasPreviewImage",!1)("allowMultiple",!1)("allowedExtensions",".zip"),E.Bb(4),E.Ic(" ",E.hc(6,4,"SKIP")," "))}function O(t,e){if(1&t&&(E.Tb(0,"pre",28),E.Gc(1),E.Sb()),2&t){var n=E.fc(2);E.Bb(1),E.Hc(n.changelogContent)}}function _(t,e){if(1&t&&(E.Tb(0,"div"),E.Tb(1,"div",23),E.Gc(2),E.gc(3,"translate"),E.Tb(4,"span"),E.Gc(5),E.Sb(),E.Ob(6,"br"),E.Gc(7),E.gc(8,"translate"),E.Tb(9,"b",24),E.Gc(10),E.Sb(),E.Sb(),E.Tb(11,"ngb-accordion",25),E.Tb(12,"ngb-panel",26),E.gc(13,"translate"),E.Ec(14,O,2,1,"ng-template",27),E.Sb(),E.Sb(),E.Sb()),2&t){var n=E.fc();E.Bb(2),E.Ic(" ",E.hc(3,5,"CURRENT_VERSION"),": "),E.Bb(3),E.Hc(n.currentVersion),E.Bb(2),E.Ic(" ",E.hc(8,7,"NEW_VERSION"),": "),E.Bb(3),E.Hc(n.version),E.Bb(2),E.mc("title",E.hc(13,9,"CHANGELOG"))}}function C(t,e){if(1&t&&(E.Tb(0,"div",29),E.Ob(1,"ngb-progressbar",30),E.Sb()),2&t){var n=E.fc();E.Bb(1),E.mc("striped",!0)("animated",!0)("value",n.updatePercent)("showValue",!0)}}function y(t,e){if(1&t){var n=E.Ub();E.Tb(0,"div",31),E.Tb(1,"button",32),E.dc("click",function(){return E.yc(n),E.fc().errorMessage=""}),E.Tb(2,"span",33),E.Gc(3,"\xd7"),E.Sb(),E.Sb(),E.Gc(4),E.gc(5,"translate"),E.Sb()}if(2&t){var c=E.fc();E.Bb(4),E.Ic(" ",E.hc(5,1,c.errorMessage)," ")}}var R,A,M=function(t){return{"no-events loading":t}},k=function(t){return{"text-muted":t}},B=((R=function(){function e(n,c,i){t(this,e),this.activeModal=n,this.dataService=c,this.appSettings=i,this.loading=!1,this.destroyed$=new o.a,this.stepNumber=1,this.updatePercent=0,this.isUpdateStarted=!1,this.isCollapsed=!0}return n(e,[{key:"ngOnInit",value:function(){this.currentVersion=this.appSettings.settings.version}},{key:"nextStepHandler",value:function(t){var e=this;switch(t&&t.preventDefault(),this.errorMessage="",this.stepNumber){case 1:if(0===this.filesWidget.filesRaw.length)return void(this.errorMessage="PLEASE_SELECT_FILE");this.isUpdateStarted=!1;var n=new FormData;n.append("file",this.filesWidget.filesRaw[0]),this.loading=!0,this.dataService.postFormData(n,"admin/system_update/upload").pipe(Object(s.a)(this.destroyed$)).subscribe({next:function(t){e.loading=!1,e.stepNumber=2},error:function(t){t.error&&(e.errorMessage=t.error),e.loading=!1}});break;case 2:this.loading=!0,this.dataService.runAction("admin/system_update/pre_update").pipe(Object(s.a)(this.destroyed$)).subscribe({next:function(t){e.stepNumber=3,e.version=t.version||"",e.changelogContent=t.changelogContent||"",e.loading=!1},error:function(t){t.error&&(e.errorMessage=t.error),e.loading=!1}});break;case 3:this.updateRunStep("vendors")}}},{key:"skipStepHandler",value:function(t){t&&t.preventDefault(),this.errorMessage="",this.stepNumber++}},{key:"updateRunStep",value:function(t){var e=this,n=["vendor","src","template","config"],c=n.indexOf(t);0===c&&(this.loading=!0,this.isUpdateStarted=!0,this.updatePercent=0),this.dataService.runAction("admin/system_update/execute/".concat(t)).pipe(Object(s.a)(this.destroyed$)).subscribe({next:function(t){e.updatePercent=(c+1)/n.length*100,100===e.updatePercent?(e.stepNumber=4,setTimeout(e.onUpdateComplete.bind(e),1e3)):e.updateRunStep(n[c+1])},error:function(t){t.error&&(e.errorMessage=t.error),e.loading=!1,e.isUpdateStarted=!1,e.updatePercent=0}})}},{key:"closeModal",value:function(t){this.activeModal.close(t)}},{key:"onUpdateComplete",value:function(){this.loading=!1,this.closeModal("completed")}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}}]),e}()).\u0275fac=function(t){return new(t||R)(E.Nb(p.b),E.Nb(d.a),E.Nb(T.a))},R.\u0275cmp=E.Hb({type:R,selectors:[["app-modal-file-upload"]],viewQuery:function(t,e){var n;1&t&&E.Kc(f,1),2&t&&E.wc(n=E.ec())&&(e.filesWidget=n.first)},decls:34,vars:42,consts:[[3,"ngClass"],[1,"modal-header","d-block"],[1,"modal-title","text-success"],[1,"icon-arrow-up-circle"],[1,"modal-body"],[1,"mb-3",3,"ngClass"],["class","icon-check-circle mr-2 text-success",4,"ngIf","ngIfElse"],["iconCircleTemplate",""],["class","show-on-hover-parent",4,"ngIf"],[4,"ngIf"],["class","py-4",4,"ngIf"],["class","alert alert-danger mt-3 mb-0",4,"ngIf"],[1,"modal-footer","d-block","pt-0"],["type","button",1,"btn","btn-primary","btn-wide",3,"disabled","click"],[1,"icon-arrow-right","ml-2"],["type","button",1,"btn","btn-secondary","btn-wide",3,"disabled","click"],[1,"icon-check-circle","mr-2","text-success"],[1,"icon-circle","mr-2"],[1,"show-on-hover-parent"],["fieldName","file",3,"hasPreviewImage","allowMultiple","allowedExtensions"],["filesWidget",""],[1,"pos-absolute-left-bottom10","show-on-hover"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"text-success","mb-2"],[1,"big"],[1,"ngb-accordion"],["id","accordion-settings-1",3,"title"],["ngbPanelContent",""],[1,"max-height400","mb-0"],[1,"py-4"],["type","info","textType","white",3,"striped","animated","value","showValue"],[1,"alert","alert-danger","mt-3","mb-0"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"]],template:function(t,e){if(1&t&&(E.Tb(0,"div",0),E.Tb(1,"div",1),E.Tb(2,"h4",2),E.Ob(3,"i",3),E.Gc(4),E.gc(5,"translate"),E.Sb(),E.Sb(),E.Tb(6,"div",4),E.Tb(7,"div"),E.Tb(8,"div",5),E.Ec(9,v,1,0,"i",6),E.Gc(10),E.gc(11,"translate"),E.Sb(),E.Tb(12,"div",5),E.Ec(13,m,1,0,"i",6),E.Gc(14),E.gc(15,"translate"),E.Sb(),E.Tb(16,"div",5),E.Ec(17,I,1,0,"i",6),E.Gc(18),E.gc(19,"translate"),E.Sb(),E.Ec(20,G,1,0,"ng-template",null,7,E.Fc),E.Sb(),E.Ec(22,N,7,6,"div",8),E.Ec(23,_,15,11,"div",9),E.Ec(24,C,2,4,"div",10),E.Ec(25,y,6,3,"div",11),E.Sb(),E.Tb(26,"div",12),E.Tb(27,"button",13),E.dc("click",function(t){return e.nextStepHandler(t)}),E.Gc(28),E.gc(29,"translate"),E.Ob(30,"i",14),E.Sb(),E.Tb(31,"button",15),E.dc("click",function(){return e.closeModal("close")}),E.Gc(32),E.gc(33,"translate"),E.Sb(),E.Sb(),E.Sb()),2&t){var n=E.xc(21);E.mc("ngClass",E.rc(34,M,e.loading)),E.Bb(4),E.Ic(" ",E.hc(5,22,"SYSTEM_UPDATE")," "),E.Bb(4),E.mc("ngClass",E.rc(36,k,1!=e.stepNumber)),E.Bb(1),E.mc("ngIf",e.stepNumber>1)("ngIfElse",n),E.Bb(1),E.Ic(" ",E.hc(11,24,"SYSTEM_UPDATE_STEP1_DESCRIPTION")," "),E.Bb(2),E.mc("ngClass",E.rc(38,k,2!=e.stepNumber)),E.Bb(1),E.mc("ngIf",e.stepNumber>2)("ngIfElse",n),E.Bb(1),E.Ic(" ",E.hc(15,26,"SYSTEM_UPDATE_STEP2_DESCRIPTION")," "),E.Bb(2),E.mc("ngClass",E.rc(40,k,3!=e.stepNumber)),E.Bb(1),E.mc("ngIf",e.stepNumber>3)("ngIfElse",n),E.Bb(1),E.Ic(" ",E.hc(19,28,"SYSTEM_UPDATE_STEP3_DESCRIPTION")," "),E.Bb(4),E.mc("ngIf",1==e.stepNumber),E.Bb(1),E.mc("ngIf",3==e.stepNumber&&!e.isUpdateStarted),E.Bb(1),E.mc("ngIf",e.isUpdateStarted),E.Bb(1),E.mc("ngIf",e.errorMessage),E.Bb(2),E.mc("disabled",e.loading),E.Bb(1),E.Ic(" ",E.hc(29,30,"CONTINUE")," "),E.Bb(3),E.mc("disabled",e.loading),E.Bb(1),E.Ic(" ",E.hc(33,32,"CLOSE")," ")}},directives:[a.n,a.p,g.a,p.a,p.p,p.q,p.s],pipes:[h.c],encapsulation:2}),R),U=i("8aBz"),P=i("s7LF"),D=i("Aq79"),L=((A=function(){function e(){t(this,e)}return n(e,[{key:"transform",value:function(t,e){if(e&&Array.isArray(t)){var n=Object.keys(e);return t.filter(function(t){return n.reduce(function(n,c){return n&&t[c].indexOf(e[c])>-1},!0)})}return t}}]),e}()).\u0275fac=function(t){return new(t||A)},A.\u0275pipe=E.Mb({name:"filter",type:A,pure:!1}),A);function w(t,e){if(1&t){var n=E.Ub();E.Tb(0,"tr"),E.Tb(1,"td"),E.Tb(2,"div",33),E.Tb(3,"div",34),E.Tb(4,"div",35),E.Tb(5,"span",36),E.Gc(6),E.Sb(),E.Sb(),E.Sb(),E.Tb(7,"span"),E.Gc(8),E.gc(9,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Tb(10,"td"),E.Tb(11,"div",37),E.Tb(12,"input",38,39),E.dc("ngModelChange",function(t){return e.$implicit.value=t}),E.Sb(),E.Tb(14,"div",40),E.Tb(15,"button",41,42),E.dc("click",function(t){return E.yc(n),E.fc().saveSettings("SETTINGS_MAIN",t)}),E.gc(17,"translate"),E.Ob(18,"i",43),E.Sb(),E.Tb(19,"button",44),E.dc("click",function(t){E.yc(n);var e=E.xc(13),c=E.xc(16);return E.fc().inputDisableToggle(e,c,t)}),E.gc(20,"translate"),E.Ob(21,"i",45),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb()}if(2&t){var c=e.$implicit,i=E.fc();E.Bb(6),E.Hc(c.name),E.Bb(2),E.Hc(E.hc(9,6,c.name)),E.Bb(4),E.nc("type",i.getFieldTypeByName(c.name)),E.mc("ngModel",c.value),E.Bb(3),E.nc("ngbTooltip",E.hc(17,8,"SAVE")),E.Bb(4),E.nc("ngbTooltip",E.hc(20,10,"EDIT"))}}function V(t,e){if(1&t){var n=E.Ub();E.Tb(0,"tr"),E.Tb(1,"td"),E.Tb(2,"input",56),E.dc("ngModelChange",function(t){return e.$implicit.name=t})("ngModelChange",function(){return E.yc(n),E.fc(2).onValueChanged("SETTINGS_ORDER_STATUSES")}),E.Sb(),E.Sb(),E.Tb(3,"td"),E.Tb(4,"input",56),E.dc("ngModelChange",function(t){return e.$implicit.options.template.value=t})("ngModelChange",function(){return E.yc(n),E.fc(2).onValueChanged("SETTINGS_ORDER_STATUSES")}),E.Sb(),E.Sb(),E.Tb(5,"td",57),E.Tb(6,"p-colorPicker",58),E.dc("ngModelChange",function(t){return e.$implicit.options.color.value=t})("ngModelChange",function(){return E.yc(n),E.fc(2).onValueChanged("SETTINGS_ORDER_STATUSES")}),E.Sb(),E.Sb(),E.Tb(7,"td",57),E.Tb(8,"button",59),E.dc("click",function(){E.yc(n);var t=e.index;return E.fc(2).deleteSetting("SETTINGS_ORDER_STATUSES",t)}),E.gc(9,"translate"),E.Ob(10,"i",60),E.Sb(),E.Sb(),E.Sb()}if(2&t){var c=e.$implicit;E.Bb(2),E.mc("ngModel",c.name),E.Bb(2),E.mc("ngModel",c.options.template.value),E.Bb(2),E.mc("appendTo","body")("ngModel",c.options.color.value),E.Bb(2),E.nc("ngbTooltip",E.hc(9,5,"DELETE"))}}function Y(t,e){if(1&t){var n=E.Ub();E.Tb(0,"div",35),E.Tb(1,"button",61),E.dc("click",function(){return E.yc(n),E.fc(2).saveSettings("SETTINGS_ORDER_STATUSES")}),E.Ob(2,"i",43),E.Gc(3," \xa0 "),E.Tb(4,"span"),E.Gc(5),E.gc(6,"translate"),E.Sb(),E.Sb(),E.Gc(7," \xa0 "),E.Tb(8,"button",59),E.dc("click",function(){return E.yc(n),E.fc(2).resetSettingsForm("SETTINGS_ORDER_STATUSES")}),E.gc(9,"translate"),E.Ob(10,"i",62),E.Sb(),E.Sb()}2&t&&(E.Bb(5),E.Hc(E.hc(6,2,"SAVE")),E.Bb(3),E.nc("ngbTooltip",E.hc(9,4,"FORM_RESET")))}function x(t,e){if(1&t){var n=E.Ub();E.Tb(0,"div"),E.Tb(1,"div",46),E.Gc(2),E.gc(3,"translate"),E.Sb(),E.Tb(4,"div",47),E.Tb(5,"table",20),E.Tb(6,"colgroup"),E.Ob(7,"col",48),E.Ob(8,"col",48),E.Ob(9,"col",49),E.Ob(10,"col",49),E.Sb(),E.Tb(11,"thead"),E.Tb(12,"tr"),E.Tb(13,"th"),E.Gc(14),E.gc(15,"translate"),E.Sb(),E.Tb(16,"th"),E.Gc(17),E.gc(18,"translate"),E.Sb(),E.Tb(19,"th"),E.Gc(20),E.gc(21,"translate"),E.Sb(),E.Ob(22,"th"),E.Sb(),E.Sb(),E.Tb(23,"tbody"),E.Ec(24,V,11,7,"tr",22),E.Sb(),E.Tb(25,"tfoot"),E.Tb(26,"tr",50),E.Tb(27,"td",51),E.Tb(28,"div",52),E.Ec(29,Y,11,6,"div",53),E.Sb(),E.Tb(30,"button",54),E.dc("click",function(){return E.yc(n),E.fc().addSetting("SETTINGS_ORDER_STATUSES")}),E.Ob(31,"i",55),E.Gc(32," \xa0 "),E.Tb(33,"span"),E.Gc(34),E.gc(35,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb()}if(2&t){var c=E.fc();E.Fb("loading",c.settings.SETTINGS_DELIVERY.loading),E.Bb(2),E.Ic(" ",E.hc(3,9,"SETTINGS_STATUSES_DESCRIPTION")," "),E.Bb(12),E.Ic(" ",E.hc(15,11,"NAME")," "),E.Bb(3),E.Ic(" ",E.hc(18,13,"MAIL_TEMPLATE")," "),E.Bb(3),E.Ic(" ",E.hc(21,15,"COLOR")," "),E.Bb(4),E.mc("ngForOf",c.settings.SETTINGS_ORDER_STATUSES.values),E.Bb(5),E.mc("ngIf",c.settings.SETTINGS_ORDER_STATUSES.changed),E.Bb(5),E.Hc(E.hc(35,17,"ADD"))}}function F(t,e){if(1&t){var n=E.Ub();E.Tb(0,"tr"),E.Tb(1,"td"),E.Tb(2,"input",56),E.dc("ngModelChange",function(t){return e.$implicit.name=t})("ngModelChange",function(){return E.yc(n),E.fc(2).onValueChanged("SETTINGS_DELIVERY")}),E.Sb(),E.Sb(),E.Tb(3,"td",57),E.Tb(4,"input",63),E.dc("ngModelChange",function(t){return e.$implicit.options.price.value=t})("ngModelChange",function(){return E.yc(n),E.fc(2).onValueChanged("SETTINGS_DELIVERY")}),E.Sb(),E.Sb(),E.Tb(5,"td",57),E.Tb(6,"input",63),E.dc("ngModelChange",function(t){return e.$implicit.options.priceLimit.value=t})("ngModelChange",function(){return E.yc(n),E.fc(2).onValueChanged("SETTINGS_DELIVERY")}),E.Sb(),E.Sb(),E.Tb(7,"td",57),E.Tb(8,"button",59),E.dc("click",function(){E.yc(n);var t=e.index;return E.fc(2).deleteSetting("SETTINGS_DELIVERY",t)}),E.gc(9,"translate"),E.Ob(10,"i",60),E.Sb(),E.Sb(),E.Sb()}if(2&t){var c=e.$implicit;E.Bb(2),E.mc("ngModel",c.name),E.Bb(2),E.mc("ngModel",c.options.price.value),E.Bb(2),E.mc("ngModel",c.options.priceLimit.value),E.Bb(2),E.nc("ngbTooltip",E.hc(9,4,"DELETE"))}}function H(t,e){if(1&t){var n=E.Ub();E.Tb(0,"div",35),E.Tb(1,"button",61),E.dc("click",function(){return E.yc(n),E.fc(2).saveSettings("SETTINGS_DELIVERY")}),E.Ob(2,"i",43),E.Gc(3," \xa0 "),E.Tb(4,"span"),E.Gc(5),E.gc(6,"translate"),E.Sb(),E.Sb(),E.Gc(7," \xa0 "),E.Tb(8,"button",59),E.dc("click",function(){return E.yc(n),E.fc(2).resetSettingsForm("SETTINGS_DELIVERY")}),E.gc(9,"translate"),E.Ob(10,"i",62),E.Sb(),E.Sb()}2&t&&(E.Bb(5),E.Hc(E.hc(6,2,"SAVE")),E.Bb(3),E.nc("ngbTooltip",E.hc(9,4,"FORM_RESET")))}function $(t,e){if(1&t){var n=E.Ub();E.Tb(0,"div"),E.Tb(1,"div",46),E.Gc(2),E.gc(3,"translate"),E.Sb(),E.Tb(4,"div",47),E.Tb(5,"table",20),E.Tb(6,"thead"),E.Tb(7,"tr"),E.Tb(8,"th"),E.Gc(9),E.gc(10,"translate"),E.Sb(),E.Tb(11,"th"),E.Gc(12),E.gc(13,"translate"),E.Sb(),E.Tb(14,"th"),E.Gc(15),E.gc(16,"translate"),E.Sb(),E.Ob(17,"th"),E.Sb(),E.Sb(),E.Tb(18,"tbody"),E.Ec(19,F,11,6,"tr",22),E.Sb(),E.Tb(20,"tfoot"),E.Tb(21,"tr",50),E.Tb(22,"td",51),E.Tb(23,"div",52),E.Ec(24,H,11,6,"div",53),E.Sb(),E.Tb(25,"button",54),E.dc("click",function(){return E.yc(n),E.fc().addSetting("SETTINGS_DELIVERY")}),E.Ob(26,"i",55),E.Gc(27," \xa0 "),E.Tb(28,"span"),E.Gc(29),E.gc(30,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb()}if(2&t){var c=E.fc();E.Fb("loading",c.settings.SETTINGS_DELIVERY.loading),E.Bb(2),E.Ic(" ",E.hc(3,9,"SETTINGS_DELIVERY_DESCRIPTION")," "),E.Bb(7),E.Ic(" ",E.hc(10,11,"NAME")," "),E.Bb(3),E.Ic(" ",E.hc(13,13,"PRICE")," "),E.Bb(3),E.Ic(" ",E.hc(16,15,"MAX_PRICE")," "),E.Bb(4),E.mc("ngForOf",c.settings.SETTINGS_DELIVERY.values),E.Bb(5),E.mc("ngIf",c.settings.SETTINGS_DELIVERY.changed),E.Bb(5),E.Hc(E.hc(30,17,"ADD"))}}function j(t,e){if(1&t){var n=E.Ub();E.Tb(0,"tr"),E.Tb(1,"td"),E.Tb(2,"input",56),E.dc("ngModelChange",function(t){return e.$implicit.name=t})("ngModelChange",function(){return E.yc(n),E.fc(2).onValueChanged("SETTINGS_PAYMENT")}),E.Sb(),E.Sb(),E.Tb(3,"td",57),E.Tb(4,"input",56),E.dc("ngModelChange",function(t){return e.$implicit.options.value.value=t})("ngModelChange",function(){return E.yc(n),E.fc(2).onValueChanged("SETTINGS_PAYMENT")}),E.Sb(),E.Sb(),E.Tb(5,"td",57),E.Tb(6,"button",59),E.dc("click",function(){E.yc(n);var t=e.index;return E.fc(2).deleteSetting("SETTINGS_PAYMENT",t)}),E.gc(7,"translate"),E.Ob(8,"i",60),E.Sb(),E.Sb(),E.Sb()}if(2&t){var c=e.$implicit;E.Bb(2),E.mc("ngModel",c.name),E.Bb(2),E.mc("ngModel",c.options.value.value),E.Bb(2),E.nc("ngbTooltip",E.hc(7,3,"DELETE"))}}function q(t,e){if(1&t){var n=E.Ub();E.Tb(0,"div",35),E.Tb(1,"button",61),E.dc("click",function(){return E.yc(n),E.fc(2).saveSettings("SETTINGS_PAYMENT")}),E.Ob(2,"i",43),E.Gc(3," \xa0 "),E.Tb(4,"span"),E.Gc(5),E.gc(6,"translate"),E.Sb(),E.Sb(),E.Gc(7," \xa0 "),E.Tb(8,"button",59),E.dc("click",function(){return E.yc(n),E.fc(2).resetSettingsForm("SETTINGS_PAYMENT")}),E.gc(9,"translate"),E.Ob(10,"i",62),E.Sb(),E.Sb()}2&t&&(E.Bb(5),E.Hc(E.hc(6,2,"SAVE")),E.Bb(3),E.nc("ngbTooltip",E.hc(9,4,"FORM_RESET")))}function K(t,e){if(1&t){var n=E.Ub();E.Tb(0,"div"),E.Tb(1,"div",46),E.Gc(2),E.gc(3,"translate"),E.Sb(),E.Tb(4,"div",47),E.Tb(5,"table",20),E.Tb(6,"colgroup"),E.Ob(7,"col",64),E.Ob(8,"col",64),E.Ob(9,"col",49),E.Sb(),E.Tb(10,"thead"),E.Tb(11,"tr"),E.Tb(12,"th"),E.Gc(13),E.gc(14,"translate"),E.Sb(),E.Tb(15,"th"),E.Gc(16),E.gc(17,"translate"),E.Sb(),E.Ob(18,"th"),E.Sb(),E.Sb(),E.Tb(19,"tbody"),E.Ec(20,j,9,5,"tr",22),E.Sb(),E.Tb(21,"tfoot"),E.Tb(22,"tr",50),E.Tb(23,"td",51),E.Tb(24,"div",52),E.Ec(25,q,11,6,"div",53),E.Sb(),E.Tb(26,"button",54),E.dc("click",function(){return E.yc(n),E.fc().addSetting("SETTINGS_PAYMENT")}),E.Ob(27,"i",55),E.Gc(28," \xa0 "),E.Tb(29,"span"),E.Gc(30),E.gc(31,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb()}if(2&t){var c=E.fc();E.Fb("loading",c.settings.SETTINGS_PAYMENT.loading),E.Bb(2),E.Ic(" ",E.hc(3,8,"SETTINGS_PAYMENT_DESCRIPTION")," "),E.Bb(11),E.Ic(" ",E.hc(14,10,"NAME")," "),E.Bb(3),E.Ic(" ",E.hc(17,12,"VALUE")," "),E.Bb(4),E.mc("ngForOf",c.settings.SETTINGS_PAYMENT.values),E.Bb(5),E.mc("ngIf",c.settings.SETTINGS_PAYMENT.changed),E.Bb(5),E.Hc(E.hc(31,14,"ADD"))}}function W(t,e){if(1&t){var n=E.Ub();E.Tb(0,"tr"),E.Tb(1,"td"),E.Tb(2,"input",56),E.dc("ngModelChange",function(t){return e.$implicit.name=t})("ngModelChange",function(){return E.yc(n),E.fc(2).onValueChanged("SETTINGS_CURRENCY")}),E.Sb(),E.Sb(),E.Tb(3,"td",57),E.Tb(4,"input",65),E.dc("ngModelChange",function(t){return e.$implicit.options.value.value=t})("ngModelChange",function(){return E.yc(n),E.fc(2).onValueChanged("SETTINGS_CURRENCY")}),E.Sb(),E.Sb(),E.Tb(5,"td",57),E.Tb(6,"button",59),E.dc("click",function(){E.yc(n);var t=e.index;return E.fc(2).deleteSetting("SETTINGS_CURRENCY",t)}),E.gc(7,"translate"),E.Ob(8,"i",60),E.Sb(),E.Sb(),E.Sb()}if(2&t){var c=e.$implicit;E.Bb(2),E.mc("ngModel",c.name),E.Bb(2),E.mc("ngModel",c.options.value.value),E.Bb(2),E.nc("ngbTooltip",E.hc(7,3,"REMOVE"))}}function J(t,e){if(1&t){var n=E.Ub();E.Tb(0,"div",35),E.Tb(1,"button",61),E.dc("click",function(){return E.yc(n),E.fc(2).saveSettings("SETTINGS_CURRENCY")}),E.Ob(2,"i",43),E.Gc(3," \xa0 "),E.Tb(4,"span"),E.Gc(5),E.gc(6,"translate"),E.Sb(),E.Sb(),E.Gc(7," \xa0 "),E.Tb(8,"button",59),E.dc("click",function(){return E.yc(n),E.fc(2).resetSettingsForm("SETTINGS_CURRENCY")}),E.gc(9,"translate"),E.Ob(10,"i",62),E.Sb(),E.Sb()}2&t&&(E.Bb(5),E.Hc(E.hc(6,2,"SAVE")),E.Bb(3),E.nc("ngbTooltip",E.hc(9,4,"FORM_RESET")))}function X(t,e){if(1&t){var n=E.Ub();E.Tb(0,"div"),E.Tb(1,"div",46),E.Gc(2),E.gc(3,"translate"),E.Sb(),E.Tb(4,"div",47),E.Tb(5,"table",20),E.Tb(6,"colgroup"),E.Ob(7,"col",64),E.Ob(8,"col",64),E.Ob(9,"col",49),E.Sb(),E.Tb(10,"thead"),E.Tb(11,"tr"),E.Tb(12,"th"),E.Gc(13),E.gc(14,"translate"),E.Sb(),E.Tb(15,"th"),E.Gc(16),E.gc(17,"translate"),E.Sb(),E.Ob(18,"th"),E.Sb(),E.Sb(),E.Tb(19,"tbody"),E.Ec(20,W,9,5,"tr",22),E.Sb(),E.Tb(21,"tfoot"),E.Tb(22,"tr",50),E.Tb(23,"td",51),E.Tb(24,"div",52),E.Ec(25,J,11,6,"div",53),E.Sb(),E.Tb(26,"button",54),E.dc("click",function(){return E.yc(n),E.fc().addSetting("SETTINGS_CURRENCY")}),E.Ob(27,"i",55),E.Gc(28," \xa0 "),E.Tb(29,"span"),E.Gc(30),E.gc(31,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb()}if(2&t){var c=E.fc();E.Fb("loading",c.settings.SETTINGS_CURRENCY.loading),E.Bb(2),E.Ic(" ",E.hc(3,8,"SETTINGS_CURRENCY_RATE_DESCRIPTION")," "),E.Bb(11),E.Ic(" ",E.hc(14,10,"CURRENCY")," "),E.Bb(3),E.Ic(" ",E.hc(17,12,"VALUE")," "),E.Bb(4),E.mc("ngForOf",c.settings.SETTINGS_CURRENCY.values),E.Bb(5),E.mc("ngIf",c.settings.SETTINGS_CURRENCY.changed),E.Bb(5),E.Hc(E.hc(31,14,"ADD"))}}function z(t,e){if(1&t){var n=E.Ub();E.Tb(0,"tr"),E.Tb(1,"td"),E.Tb(2,"input",56),E.dc("ngModelChange",function(t){return e.$implicit.name=t})("ngModelChange",function(){return E.yc(n),E.fc(2).onValueChanged("SETTINGS_PROMOCODES")}),E.Sb(),E.Sb(),E.Tb(3,"td",57),E.Tb(4,"input",56),E.dc("ngModelChange",function(t){return e.$implicit.options.value.value=t})("ngModelChange",function(){return E.yc(n),E.fc(2).onValueChanged("SETTINGS_PROMOCODES")}),E.Sb(),E.Sb(),E.Tb(5,"td",57),E.Tb(6,"input",68),E.dc("ngModelChange",function(t){return e.$implicit.options.quantity.value=t})("ngModelChange",function(){return E.yc(n),E.fc(2).onValueChanged("SETTINGS_PROMOCODES")}),E.Sb(),E.Sb(),E.Tb(7,"td",57),E.Tb(8,"button",59),E.dc("click",function(){E.yc(n);var t=e.index;return E.fc(2).deleteSetting("SETTINGS_PROMOCODES",t)}),E.gc(9,"translate"),E.Ob(10,"i",60),E.Sb(),E.Sb(),E.Sb()}if(2&t){var c=e.$implicit;E.Bb(2),E.mc("ngModel",c.name),E.Bb(2),E.mc("ngModel",c.options.value.value),E.Bb(2),E.mc("ngModel",c.options.quantity.value),E.Bb(2),E.nc("ngbTooltip",E.hc(9,4,"REMOVE"))}}function Q(t,e){if(1&t){var n=E.Ub();E.Tb(0,"div",35),E.Tb(1,"button",61),E.dc("click",function(){return E.yc(n),E.fc(2).saveSettings("SETTINGS_PROMOCODES")}),E.Ob(2,"i",43),E.Gc(3," \xa0 "),E.Tb(4,"span"),E.Gc(5),E.gc(6,"translate"),E.Sb(),E.Sb(),E.Gc(7," \xa0 "),E.Tb(8,"button",59),E.dc("click",function(){return E.yc(n),E.fc(2).resetSettingsForm("SETTINGS_PROMOCODES")}),E.gc(9,"translate"),E.Ob(10,"i",62),E.Sb(),E.Sb()}2&t&&(E.Bb(5),E.Hc(E.hc(6,2,"SAVE")),E.Bb(3),E.nc("ngbTooltip",E.hc(9,4,"FORM_RESET")))}function Z(t,e){if(1&t){var n=E.Ub();E.Tb(0,"div"),E.Tb(1,"div",46),E.Gc(2),E.gc(3,"translate"),E.Sb(),E.Tb(4,"div",47),E.Tb(5,"table",20),E.Tb(6,"colgroup"),E.Ob(7,"col",66),E.Ob(8,"col",66),E.Ob(9,"col",66),E.Ob(10,"col",49),E.Sb(),E.Tb(11,"thead"),E.Tb(12,"tr"),E.Tb(13,"th"),E.Gc(14),E.gc(15,"translate"),E.Sb(),E.Tb(16,"th"),E.Gc(17),E.gc(18,"translate"),E.Sb(),E.Tb(19,"th"),E.Gc(20),E.gc(21,"translate"),E.Sb(),E.Ob(22,"th"),E.Sb(),E.Sb(),E.Tb(23,"tbody"),E.Ec(24,z,11,6,"tr",22),E.Sb(),E.Tb(25,"tfoot"),E.Tb(26,"tr",50),E.Tb(27,"td",67),E.Tb(28,"div",52),E.Ec(29,Q,11,6,"div",53),E.Sb(),E.Tb(30,"button",54),E.dc("click",function(){return E.yc(n),E.fc().addSetting("SETTINGS_PROMOCODES")}),E.Ob(31,"i",55),E.Gc(32," \xa0 "),E.Tb(33,"span"),E.Gc(34),E.gc(35,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb()}if(2&t){var c=E.fc();E.Fb("loading",c.settings.SETTINGS_PROMOCODES.loading),E.Bb(2),E.Ic(" ",E.hc(3,9,"SETTINGS_PROMOCODES_DESCRIPTION")," "),E.Bb(12),E.Ic(" ",E.hc(15,11,"PROMO_CODE")," "),E.Bb(3),E.Ic(" ",E.hc(18,13,"VALUE")," "),E.Bb(3),E.Ic(" ",E.hc(21,15,"QUANTITY")," "),E.Bb(4),E.mc("ngForOf",c.settings.SETTINGS_PROMOCODES.values),E.Bb(5),E.mc("ngIf",c.settings.SETTINGS_PROMOCODES.changed),E.Bb(5),E.Hc(E.hc(35,17,"ADD"))}}function tt(t,e){if(1&t){var n=E.Ub();E.Tb(0,"tr"),E.Tb(1,"td"),E.Tb(2,"input",56),E.dc("ngModelChange",function(t){return e.$implicit.name=t})("ngModelChange",function(){return E.yc(n),E.fc(2).onValueChanged("SETTINGS_LANGUAGES")}),E.Sb(),E.Sb(),E.Tb(3,"td",57),E.Tb(4,"input",56),E.dc("ngModelChange",function(t){return e.$implicit.options.value.value=t})("ngModelChange",function(){return E.yc(n),E.fc(2).onValueChanged("SETTINGS_LANGUAGES")}),E.Sb(),E.Sb(),E.Tb(5,"td",57),E.Tb(6,"button",59),E.dc("click",function(){E.yc(n);var t=e.index;return E.fc(2).deleteSetting("SETTINGS_LANGUAGES",t)}),E.gc(7,"translate"),E.Ob(8,"i",60),E.Sb(),E.Sb(),E.Sb()}if(2&t){var c=e.$implicit;E.Bb(2),E.mc("ngModel",c.name),E.Bb(2),E.mc("ngModel",c.options.value.value),E.Bb(2),E.nc("ngbTooltip",E.hc(7,3,"DELETE"))}}function et(t,e){if(1&t){var n=E.Ub();E.Tb(0,"div",35),E.Tb(1,"button",61),E.dc("click",function(){return E.yc(n),E.fc(2).saveSettings("SETTINGS_LANGUAGES")}),E.Ob(2,"i",43),E.Gc(3," \xa0 "),E.Tb(4,"span"),E.Gc(5),E.gc(6,"translate"),E.Sb(),E.Sb(),E.Gc(7," \xa0 "),E.Tb(8,"button",59),E.dc("click",function(){return E.yc(n),E.fc(2).resetSettingsForm("SETTINGS_LANGUAGES")}),E.gc(9,"translate"),E.Ob(10,"i",62),E.Sb(),E.Sb()}2&t&&(E.Bb(5),E.Hc(E.hc(6,2,"SAVE")),E.Bb(3),E.nc("ngbTooltip",E.hc(9,4,"FORM_RESET")))}function nt(t,e){if(1&t){var n=E.Ub();E.Tb(0,"div"),E.Tb(1,"div",46),E.Gc(2),E.gc(3,"translate"),E.Sb(),E.Tb(4,"div",47),E.Tb(5,"table",20),E.Tb(6,"colgroup"),E.Ob(7,"col",64),E.Ob(8,"col",64),E.Ob(9,"col",49),E.Sb(),E.Tb(10,"thead"),E.Tb(11,"tr"),E.Tb(12,"th"),E.Gc(13),E.gc(14,"translate"),E.Sb(),E.Tb(15,"th"),E.Gc(16),E.gc(17,"translate"),E.Sb(),E.Ob(18,"th"),E.Sb(),E.Sb(),E.Tb(19,"tbody"),E.Ec(20,tt,9,5,"tr",22),E.Sb(),E.Tb(21,"tfoot"),E.Tb(22,"tr",50),E.Tb(23,"td",51),E.Tb(24,"div",52),E.Ec(25,et,11,6,"div",53),E.Sb(),E.Tb(26,"button",54),E.dc("click",function(){return E.yc(n),E.fc().addSetting("SETTINGS_LANGUAGES")}),E.Ob(27,"i",55),E.Gc(28," \xa0 "),E.Tb(29,"span"),E.Gc(30),E.gc(31,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb()}if(2&t){var c=E.fc();E.Fb("loading",c.settings.SETTINGS_LANGUAGES.loading),E.Bb(2),E.Ic(" ",E.hc(3,8,"SETTINGS_LANGUAGES_DESCRIPTION")," "),E.Bb(11),E.Ic(" ",E.hc(14,10,"LANGUAGE")," "),E.Bb(3),E.Ic(" ",E.hc(17,12,"LOCALE")," "),E.Bb(4),E.mc("ngForOf",c.settings.SETTINGS_LANGUAGES.values),E.Bb(5),E.mc("ngIf",c.settings.SETTINGS_LANGUAGES.changed),E.Bb(5),E.Hc(E.hc(31,14,"ADD"))}}function ct(t,e){1&t&&(E.Tb(0,"div",79),E.Gc(1),E.gc(2,"translate"),E.Sb()),2&t&&(E.Bb(1),E.Ic(" ",E.hc(2,1,"NOTHING_FOUND"),". "))}function it(t,e){if(1&t&&(E.Tb(0,"tr"),E.Tb(1,"td"),E.Gc(2),E.Sb(),E.Tb(3,"td",57),E.Gc(4),E.Sb(),E.Sb()),2&t){var n=e.$implicit;E.Bb(2),E.Hc(n.name),E.Bb(2),E.Hc(n.version)}}var at=function(t){return{name:t}};function bt(t,e){if(1&t&&(E.Tb(0,"div",80),E.Tb(1,"div",47),E.Tb(2,"table",20),E.Tb(3,"colgroup"),E.Ob(4,"col",81),E.Ob(5,"col",48),E.Sb(),E.Tb(6,"thead"),E.Tb(7,"tr"),E.Tb(8,"th"),E.Gc(9),E.gc(10,"translate"),E.Sb(),E.Tb(11,"th"),E.Gc(12),E.gc(13,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Tb(14,"tbody"),E.Ec(15,it,5,2,"tr",22),E.gc(16,"filter"),E.Sb(),E.Sb(),E.Sb(),E.Sb()),2&t){var n=E.fc(2);E.Bb(9),E.Ic(" ",E.hc(10,3,"NAME")," "),E.Bb(3),E.Ic(" ",E.hc(13,5,"VERSION")," "),E.Bb(3),E.mc("ngForOf",E.ic(16,7,n.composerPackages,E.rc(10,at,n.composerPackageNameFilter)))}}var rt=function(t){return{loading:t}},ot=function(t){return{"form-control-search-clear":t}};function st(t,e){if(1&t){var n=E.Ub();E.Tb(0,"div",69),E.Tb(1,"div",70),E.Tb(2,"button",71),E.dc("click",function(t){return E.yc(n),E.fc().modalSystemUpdate(t)}),E.Ob(3,"i",72),E.Gc(4),E.gc(5,"translate"),E.Sb(),E.Sb(),E.Tb(6,"div",73),E.Gc(7),E.gc(8,"translate"),E.Sb(),E.Tb(9,"div",74),E.Tb(10,"input",75),E.dc("ngModelChange",function(t){return E.yc(n),E.fc().composerPackageNameFilter=t}),E.gc(11,"translate"),E.Sb(),E.Tb(12,"span",76),E.dc("click",function(){return E.yc(n),E.fc().composerPackageNameFilter=""}),E.Sb(),E.Sb(),E.Ec(13,ct,3,3,"div",77),E.gc(14,"filter"),E.Ec(15,bt,17,12,"ng-template",null,78,E.Fc),E.Sb()}if(2&t){var c=E.xc(16),i=E.fc();E.mc("ngClass",E.rc(17,rt,i.settings.SETTINGS_COMPOSER_PACKAGES.loading)),E.Bb(4),E.Ic(" ",E.hc(5,8,"SYSTEM_UPDATE")," "),E.Bb(3),E.Ic(" ",E.hc(8,10,"SETTINGS_COMPOSER_PACKAGES_DESCRIPTION")," "),E.Bb(2),E.mc("ngClass",E.rc(19,ot,!!i.composerPackageNameFilter)),E.Bb(1),E.oc("placeholder","",E.hc(11,12,"SEARCH"),"..."),E.mc("ngModel",i.composerPackageNameFilter),E.Bb(3),E.mc("ngIf",0===E.ic(14,14,i.composerPackages,E.rc(21,at,i.composerPackageNameFilter)).length)("ngIfElse",c)}}var lt,St,ut,Tt=[{path:"",component:(lt=function(){function e(n,c,i,a,b){t(this,e),this.messageService=n,this.settingsService=c,this.appSettings=i,this.modalService=a,this.translateService=b,this.loading=!1,this.forms={},this.composerPackages=[],this.composerPackageName="",this.composerPackageVersion="",this.composerPackageNameFilter="",this.settings={SETTINGS_MAIN:new u.a(!1,!0,[],null),SETTINGS_ORDER_STATUSES:new u.a(!1,!0,[],{template:{value:"userEmailStatus",type:"text"},color:{value:"#00aeff",type:"text"}}),SETTINGS_DELIVERY:new u.a(!1,!0,[],{price:{value:0,type:"number"},priceLimit:{value:0,type:"number"}}),SETTINGS_PROMOCODES:new u.a(!1,!0,[],{value:{value:"",type:"text"},quantity:{value:0,type:"number"}}),SETTINGS_PAYMENT:new u.a(!1,!0,[],{value:{value:"",type:"text"}}),SETTINGS_CURRENCY:new u.a(!1,!0,[],{value:{value:1,type:"number"}}),SETTINGS_LANGUAGES:new u.a(!1,!0,[],{value:{value:"",type:"text"}}),SETTINGS_COMPOSER_PACKAGES:new u.a(!1,!0,[],null)},this.destroyed$=new o.a,this.baseUrl=this.appSettings.settings.webApiUrl+"/"}return n(e,[{key:"ngOnInit",value:function(){this.getSettings(),this.getComposerPackages()}},{key:"getSettings",value:function(){var t=this;this.settingsService.getList().pipe(Object(s.a)(this.destroyed$)).subscribe(function(e){e.SETTINGS_MAIN&&(t.settings.SETTINGS_MAIN.values=e.SETTINGS_MAIN,t.settings.SETTINGS_MAIN.defaultValues=Object(l.cloneDeep)(e.SETTINGS_MAIN),t.settings.SETTINGS_MAIN.loading=!1),e.SETTINGS_ORDER_STATUSES&&(t.settings.SETTINGS_ORDER_STATUSES.values=e.SETTINGS_ORDER_STATUSES,t.settings.SETTINGS_ORDER_STATUSES.defaultValues=Object(l.cloneDeep)(e.SETTINGS_ORDER_STATUSES),t.settings.SETTINGS_ORDER_STATUSES.loading=!1),e.SETTINGS_DELIVERY&&(t.settings.SETTINGS_DELIVERY.values=e.SETTINGS_DELIVERY,t.settings.SETTINGS_DELIVERY.defaultValues=Object(l.cloneDeep)(e.SETTINGS_DELIVERY),t.settings.SETTINGS_DELIVERY.loading=!1),e.SETTINGS_PAYMENT&&(t.settings.SETTINGS_PAYMENT.values=e.SETTINGS_PAYMENT,t.settings.SETTINGS_PAYMENT.defaultValues=Object(l.cloneDeep)(e.SETTINGS_PAYMENT),t.settings.SETTINGS_PAYMENT.loading=!1),e.SETTINGS_CURRENCY&&(t.settings.SETTINGS_CURRENCY.values=e.SETTINGS_CURRENCY,t.settings.SETTINGS_CURRENCY.defaultValues=Object(l.cloneDeep)(e.SETTINGS_CURRENCY),t.settings.SETTINGS_CURRENCY.loading=!1),e.SETTINGS_PROMOCODES&&(t.settings.SETTINGS_PROMOCODES.values=e.SETTINGS_PROMOCODES,t.settings.SETTINGS_PROMOCODES.defaultValues=Object(l.cloneDeep)(e.SETTINGS_PROMOCODES),t.settings.SETTINGS_PROMOCODES.loading=!1),e.SETTINGS_LANGUAGES&&(t.settings.SETTINGS_LANGUAGES.values=e.SETTINGS_LANGUAGES,t.settings.SETTINGS_LANGUAGES.defaultValues=Object(l.cloneDeep)(e.SETTINGS_LANGUAGES),t.settings.SETTINGS_LANGUAGES.loading=!1)})}},{key:"addSetting",value:function(t){var e={name:"",description:"",options:Object(l.cloneDeep)(this.settings[t].defaultOptions)};this.settings[t].values.push(e)}},{key:"deleteSetting",value:function(t,e){this.settings[t].values.splice(e,1),this.settings[t].changed=!0}},{key:"saveSettings",value:function(t,e){var n=this;e&&e.preventDefault();var c=this.settings[t].values;this.settings[t].loading=!0,this.settingsService.updateGroup(t,c).pipe(Object(s.a)(this.destroyed$)).subscribe({next:function(e){n.messageService.add({key:"message",severity:"success",summary:n.getLangString("MESSAGE"),detail:n.getLangString("DATA_SAVED_SUCCESSFULLY")}),n.settings[t].defaultValues=e,n.settings[t].loading=!1,n.settings[t].changed=!1,n.pageReload()},error:function(e){e.error&&n.messageService.add({key:"message",severity:"error",summary:n.getLangString("ERROR"),detail:e.error}),n.settings[t].loading=!1}})}},{key:"getFieldTypeByName",value:function(t){return t.toLowerCase().indexOf("password")>-1?"password":"text"}},{key:"getCurrentLocale",value:function(){var t=Object(l.findIndex)(this.settings.SETTINGS_MAIN.values,{name:"locale"});return t>-1?String(this.settings.SETTINGS_MAIN.values[t].value):""}},{key:"getLangString",value:function(t){return this.translateService.store.translations[this.translateService.currentLang]&&this.translateService.store.translations[this.translateService.currentLang][t]||t}},{key:"resetSettingsForm",value:function(t){var e=this.settings[t].defaultValues.length;e<this.settings[t].values.length&&this.settings[t].values.splice(e-1,this.settings[t].values.length-e),Object(l.extend)(this.settings[t].values,Object(l.cloneDeepWith)(this.settings[t].defaultValues)),this.settings[t].loading=!1,this.settings[t].changed=!1}},{key:"getActionSuccessMessage",value:function(t){var e="";switch(t){case"clear_cache":e=this.getLangString("CACHE_CLEAR_SUCCESSFULLY");break;case"clear_system_cache":e=this.getLangString("CACHE_SYSTEM_CLEAR_SUCCESSFULLY");break;case"update_filters":e=this.getLangString("UPDATE_FILTERS_SUCCESSFULLY")}return e}},{key:"runActionPost",value:function(t){var e=this;this.loading=!0,this.settingsService.runActionPost(t).pipe(Object(s.a)(this.destroyed$)).subscribe({next:function(n){if(e.loading=!1,["update_internationalization"].indexOf(t)>-1)e.pageReload();else if(n&&n.success){var c=e.getActionSuccessMessage(t);c&&e.messageService.add({key:"message",severity:"success",summary:e.getLangString("MESSAGE"),detail:c})}},error:function(t){t.error&&e.messageService.add({key:"message",severity:"error",summary:e.getLangString("ERROR"),detail:t.error}),e.loading=!1}})}},{key:"getComposerPackages",value:function(){var t=this;this.settings.SETTINGS_COMPOSER_PACKAGES.loading=!0,this.settingsService.getComposerPackagesList().pipe(Object(s.a)(this.destroyed$)).subscribe({next:function(e){t.composerPackages=e,t.settings.SETTINGS_COMPOSER_PACKAGES.loading=!1},error:function(e){t.settings.SETTINGS_COMPOSER_PACKAGES.loading=!1}})}},{key:"requirePackage",value:function(t){var e=this;t&&t.preventDefault(),this.composerPackageName&&(this.settings.SETTINGS_COMPOSER_PACKAGES.loading=!0,this.settingsService.composerRequirePackage(this.composerPackageName,this.composerPackageVersion).pipe(Object(s.a)(this.destroyed$)).subscribe({next:function(t){e.composerPackageName="",e.composerPackageVersion="",e.settings.SETTINGS_COMPOSER_PACKAGES.loading=!1},error:function(t){t.error&&e.messageService.add({key:"message",severity:"error",summary:e.getLangString("ERROR"),detail:t.error}),e.settings.SETTINGS_COMPOSER_PACKAGES.loading=!1}}))}},{key:"modalSystemUpdate",value:function(t){var e=this;t&&t.preventDefault(),this.modalRef&&(this.modalRef.dismiss(),this.modalRef=null),this.modalRef=this.modalService.open(B,{backdrop:"static",keyboard:!1}),this.modalRef.result.then(function(t){"completed"===t&&(e.messageService.add({key:"message",severity:"success",summary:e.getLangString("MESSAGE"),detail:e.getLangString("SYSTEM_UPDATE_COMPLETED")}),setTimeout(e.pageReload.bind(e),2e3))})}},{key:"onValueChanged",value:function(t){this.settings[t].changed=!0}},{key:"inputDisableToggle",value:function(t,e,n){n&&n.preventDefault(),t.readOnly=!t.readOnly,e&&(e.style.display="none"!==e.style.display?"none":"")}},{key:"pageReload",value:function(){window.location.reload()}}]),e}(),lt.title="SETTINGS",lt.\u0275fac=function(t){return new(t||lt)(E.Nb(S.b),E.Nb(d.a),E.Nb(T.a),E.Nb(p.h),E.Nb(h.d))},lt.\u0275cmp=E.Hb({type:lt,selectors:[["app-settings"]],features:[E.Ab([S.b])],decls:80,vars:54,consts:[[1,"card"],[1,"card-body"],[1,"float-md-left"],[1,"icon-cog"],[1,"float-md-right"],["ngbDropdown","","placement","bottom-right",1,"d-block","d-md-inline-block"],["ngbDropdownToggle","",1,"btn","btn-info","btn-sm","d-block","d-md-inline-block","width-100","width-md-auto","mb-2","mb-md-0"],[1,"icon-repeat"],["ngbDropdownMenu",""],[1,"dropdown-item",3,"click"],[1,"icon-reload","text-info"],[1,"icon-repeat","text-info"],[1,"icon-globe","text-info"],[1,"icon-tag","text-info"],[1,"clearfix"],[1,"row"],[1,"col-md-6"],[1,"label-filled"],[1,"card","mb-4"],[1,"table-responsive-"],[1,"table","table-divided","mb-0"],["width","50%"],[4,"ngFor","ngForOf"],["activeIds","accordion-settings-1",1,"ngb-accordion",3,"closeOthers"],["id","accordion-settings-1",3,"title"],["ngbPanelContent",""],["id","accordion-settings-2",3,"title"],["id","accordion-settings-3",3,"title"],["id","accordion-settings-4",3,"title"],["id","accordion-settings-7",3,"title"],["id","accordion-settings-5",3,"title"],["id","accordion-settings-6",3,"title"],["key","message","position","bottom-right"],[1,"show-on-hover-parent"],[1,"show-on-hover-child","position-relative"],[1,"pos-absolute-right"],[1,"badge","badge-secondary"],[1,"input-group","input-group-sm","input-group-on-hover"],["readonly","",1,"form-control",3,"type","ngModel","ngModelChange"],["inputField",""],[1,"input-group-append"],["type","button",1,"btn","btn-outline-success",2,"display","none",3,"ngbTooltip","click"],["button",""],[1,"icon-check"],["type","button",1,"btn","btn-outline-secondary",3,"ngbTooltip","click"],[1,"icon-edit"],[1,"text-muted"],[1,"table-responsive"],["width","40%"],["width","10%"],[1,"bg-faded"],["colspan","4",1,"text-center"],[1,"relative"],["class","pos-absolute-right",4,"ngIf"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"icon-plus"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"text-center"],[3,"appendTo","ngModel","ngModelChange"],["type","button",1,"btn","btn-secondary","btn-sm",3,"ngbTooltip","click"],[1,"icon-cross"],["type","button",1,"btn","btn-info","btn-sm",3,"click"],[1,"icon-reload"],["type","number","step","1","min","0",1,"form-control","form-control-sm","mwidth-80","m-auto",3,"ngModel","ngModelChange"],["width","45%"],["type","number","step","1","min","0",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["width","30%"],["colspan","5",1,"text-center"],["type","number",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"ngClass"],[1,"float-right"],["type","button",1,"btn","btn-sm","btn-success",3,"click"],[1,"icon-arrow-up-circle"],[1,"pb-3","text-muted","mb-2"],[1,"form-control-search","mb-3",3,"ngClass"],["type","text",1,"form-control","form-control-sm",3,"placeholder","ngModel","ngModelChange"],[3,"click"],["class","alert alert-info py-1 px-3",4,"ngIf","ngIfElse"],["composerPackagesTable",""],[1,"alert","alert-info","py-1","px-3"],[1,"max-height400"],["width","60%"]],template:function(t,e){1&t&&(E.Tb(0,"div",0),E.Tb(1,"div",1),E.Tb(2,"div",2),E.Tb(3,"h3"),E.Ob(4,"i",3),E.Gc(5),E.gc(6,"translate"),E.Sb(),E.Sb(),E.Tb(7,"div",4),E.Tb(8,"div",5),E.Tb(9,"button",6),E.Ob(10,"i",7),E.Gc(11," \xa0 "),E.Tb(12,"span"),E.Gc(13),E.gc(14,"translate"),E.Sb(),E.Sb(),E.Tb(15,"div",8),E.Tb(16,"button",9),E.dc("click",function(){return e.runActionPost("clear_cache")}),E.Ob(17,"i",10),E.Gc(18),E.gc(19,"translate"),E.Sb(),E.Tb(20,"button",9),E.dc("click",function(){return e.runActionPost("clear_system_cache")}),E.Ob(21,"i",11),E.Gc(22),E.gc(23,"translate"),E.Sb(),E.Tb(24,"button",9),E.dc("click",function(){return e.runActionPost("update_internationalization")}),E.Ob(25,"i",12),E.Gc(26),E.gc(27,"translate"),E.Sb(),E.Tb(28,"button",9),E.dc("click",function(){return e.runActionPost("update_filters")}),E.Ob(29,"i",13),E.Gc(30),E.gc(31,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Ob(32,"div",14),E.Ob(33,"hr"),E.Tb(34,"div",15),E.Tb(35,"div",16),E.Tb(36,"div"),E.Tb(37,"label",17),E.Gc(38),E.gc(39,"translate"),E.Sb(),E.Tb(40,"div",18),E.Tb(41,"div",19),E.Tb(42,"table",20),E.Tb(43,"colgroup"),E.Ob(44,"col",21),E.Ob(45,"col",21),E.Sb(),E.Tb(46,"thead"),E.Tb(47,"tr"),E.Tb(48,"th"),E.Gc(49),E.gc(50,"translate"),E.Sb(),E.Tb(51,"th"),E.Gc(52),E.gc(53,"translate"),E.Sb(),E.Sb(),E.Sb(),E.Tb(54,"tbody"),E.Ec(55,w,22,12,"tr",22),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Tb(56,"div",16),E.Tb(57,"ngb-accordion",23),E.Tb(58,"ngb-panel",24),E.gc(59,"translate"),E.Ec(60,x,36,19,"ng-template",25),E.Sb(),E.Tb(61,"ngb-panel",26),E.gc(62,"translate"),E.Ec(63,$,31,19,"ng-template",25),E.Sb(),E.Tb(64,"ngb-panel",27),E.gc(65,"translate"),E.Ec(66,K,32,16,"ng-template",25),E.Sb(),E.Tb(67,"ngb-panel",28),E.gc(68,"translate"),E.Ec(69,X,32,16,"ng-template",25),E.Sb(),E.Tb(70,"ngb-panel",29),E.gc(71,"translate"),E.Ec(72,Z,36,19,"ng-template",25),E.Sb(),E.Tb(73,"ngb-panel",30),E.gc(74,"translate"),E.Ec(75,nt,32,16,"ng-template",25),E.Sb(),E.Tb(76,"ngb-panel",31),E.gc(77,"translate"),E.Ec(78,st,17,23,"ng-template",25),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Sb(),E.Ob(79,"p-toast",32)),2&t&&(E.Bb(1),E.Fb("loading",e.loading),E.Bb(4),E.Ic(" ",E.hc(6,22,"SETTINGS")," "),E.Bb(8),E.Hc(E.hc(14,24,"CLEAR_CACHE")),E.Bb(5),E.Ic(" \xa0 ",E.hc(19,26,"CLEAR_FILE_CACHE")," "),E.Bb(4),E.Ic(" \xa0 ",E.hc(23,28,"CLEAR_SYSTEM_CACHE")," "),E.Bb(4),E.Ic(" \xa0 ",E.hc(27,30,"UPDATE_DICTIONARIES")," "),E.Bb(4),E.Ic(" \xa0 ",E.hc(31,32,"UPDATE_FILTERS")," "),E.Bb(6),E.Fb("loading",e.settings.SETTINGS_MAIN.loading),E.Bb(2),E.Hc(E.hc(39,34,"SETTINGS_MAIN")),E.Bb(11),E.Hc(E.hc(50,36,"PARAMETER")),E.Bb(3),E.Hc(E.hc(53,38,"VALUE")),E.Bb(3),E.mc("ngForOf",e.settings.SETTINGS_MAIN.values),E.Bb(2),E.mc("closeOthers",!0),E.Bb(1),E.mc("title",E.hc(59,40,"SETTINGS_ORDER_STATUSES")),E.Bb(3),E.mc("title",E.hc(62,42,"SETTINGS_DELIVERY")),E.Bb(3),E.mc("title",E.hc(65,44,"SETTINGS_PAYMENT")),E.Bb(3),E.mc("title",E.hc(68,46,"SETTINGS_CURRENCY")),E.Bb(3),E.mc("title",E.hc(71,48,"SETTINGS_PROMOCODES")),E.Bb(3),E.mc("title",E.hc(74,50,"SETTINGS_LANGUAGES")),E.Bb(3),E.mc("title",E.hc(77,52,"SETTINGS_COMPOSER_PACKAGES")))},directives:[p.d,p.g,p.f,a.o,p.a,p.p,p.q,U.a,P.b,P.n,P.p,p.v,a.p,D.a,P.r,a.n],pipes:[h.c,L],encapsulation:2}),lt)}],dt=((ut=function e(){t(this,e)}).\u0275fac=function(t){return new(t||ut)},ut.\u0275mod=E.Lb({type:ut}),ut.\u0275inj=E.Kb({imports:[[r.f.forChild(Tt)],r.f]}),ut),gt=((St=function e(){t(this,e)}).\u0275fac=function(t){return new(t||St)},St.\u0275mod=E.Lb({type:St}),St.\u0275inj=E.Kb({providers:[],imports:[[a.c,b.a,dt]]}),St)},"8Eda":function(e,n,c){"use strict";c.d(n,"a",function(){return i});var i=function e(n,c,i,a,b){t(this,e),this.changed=n,this.loading=c,this.values=i,this.defaultOptions=a,this.defaultValues=b}},b1TM:function(e,c,i){"use strict";i.d(c,"a",function(){return l});var a=i("IheW"),b=i("LRne"),r=i("JIr8"),o=(i("8Eda"),i("wgQU")),s=i("8Y7J"),l=function(){var e=function(){function e(n){t(this,e),this.http=n,this.headers=new a.e({"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}),this.requestUrl="",this.baseUrl="",this.requestUrl="/admin/settings",this.baseUrl=o.a.getBaseUrl()}return n(e,[{key:"setRequestUrl",value:function(t){this.requestUrl=t}},{key:"getRequestUrl",value:function(){return this.requestUrl}},{key:"getList",value:function(){return this.http.get(this.getRequestUrl()).pipe(Object(r.a)(this.handleError()))}},{key:"clearSystemCache",value:function(){var t=this.getRequestUrl()+"/clear_system_cache";return this.http.post(t,{},{headers:this.headers}).pipe(Object(r.a)(this.handleError()))}},{key:"runActionPost",value:function(t){var e=this.getRequestUrl()+"/".concat(t);return this.http.post(e,{},{headers:this.headers}).pipe(Object(r.a)(this.handleError()))}},{key:"updateGroup",value:function(t,e){var n=this.getRequestUrl()+"/".concat(t);return this.http.put(n,e,{headers:this.headers}).pipe(Object(r.a)(this.handleError()))}},{key:"getComposerPackagesList",value:function(){return this.http.get(this.getRequestUrl()+"_composer_installed_packages").pipe(Object(r.a)(this.handleError()))}},{key:"composerRequirePackage",value:function(t,e){var n=this.getRequestUrl()+"_composer_require_package";return this.http.post(n,{packageName:t,packageVersion:e},{headers:this.headers}).pipe(Object(r.a)(this.handleError()))}},{key:"postFormData",value:function(t,e){var n=new a.e({enctype:"multipart/form-data",Accept:"application/json","X-Requested-With":"XMLHttpRequest"});return this.http.post(this.baseUrl+e,t,{headers:n}).pipe(Object(r.a)(this.handleError()))}},{key:"runAction",value:function(t){return this.http.post(this.baseUrl+t,{},{headers:this.headers}).pipe(Object(r.a)(this.handleError()))}},{key:"handleError",value:function(){var t=this,e=arguments.length>1?arguments[1]:void 0;return function(n){if(!(n.status&&[401,403].indexOf(n.status)>-1)){if(n.error)throw n.error;return Object(b.a)(e)}window.location.href=t.baseUrl+"/login"}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.ac(a.a))},e.\u0275prov=s.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}])}();